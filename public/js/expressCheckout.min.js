!function(Q){var n={};function t(B){if(n[B])return n[B].exports;var e=n[B]={i:B,l:!1,exports:{}};return Q[B].call(e.exports,e,e.exports,t),e.l=!0,e.exports}t.m=Q,t.c=n,t.d=function(Q,n,B){t.o(Q,n)||Object.defineProperty(Q,n,{enumerable:!0,get:B})},t.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},t.t=function(Q,n){if(1&n&&(Q=t(Q)),8&n)return Q;if(4&n&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(t.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&n&&"string"!=typeof Q)for(var e in Q)t.d(B,e,function(n){return Q[n]}.bind(null,e));return B},t.n=function(Q){var n=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return t.d(n,"a",n),n},t.o=function(Q,n){return Object.prototype.hasOwnProperty.call(Q,n)},t.p="",t(t.s=2)}([function(module,exports){eval("/**\n * Build Redirect Url By Ajax Request\n *\n * @param response\n * @param defaultUrl\n * @returns {string|*|string}\n */\nfunction redirectUrlByRequest(response) {\n  var defaultUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  if (!'data' in response) {\n    return defaultUrl;\n  }\n\n  var redirectUrl = 'redirectUrl' in response.data ? response.data.redirectUrl : defaultUrl;\n  return redirectUrl;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvdXRpbHMuanM/YTM0MyJdLCJuYW1lcyI6WyJyZWRpcmVjdFVybEJ5UmVxdWVzdCIsInJlc3BvbnNlIiwiZGVmYXVsdFVybCIsInJlZGlyZWN0VXJsIiwiZGF0YSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUFPQSxTQUFTQSxvQkFBVCxDQUErQkMsUUFBL0IsRUFDQTtBQUFBLE1BRHlDQyxVQUN6Qyx1RUFEc0QsRUFDdEQ7O0FBQ0UsTUFBSSxDQUFDLE1BQUQsSUFBV0QsUUFBZixFQUF5QjtBQUN2QixXQUFPQyxVQUFQO0FBQ0Q7O0FBRUQsTUFBTUMsV0FBVyxHQUFJLGlCQUFpQkYsUUFBUSxDQUFDRyxJQUEzQixHQUFtQ0gsUUFBUSxDQUFDRyxJQUFULENBQWNELFdBQWpELEdBQStERCxVQUFuRjtBQUVBLFNBQU9DLFdBQVA7QUFDRCIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCdWlsZCBSZWRpcmVjdCBVcmwgQnkgQWpheCBSZXF1ZXN0XG4gKlxuICogQHBhcmFtIHJlc3BvbnNlXG4gKiBAcGFyYW0gZGVmYXVsdFVybFxuICogQHJldHVybnMge3N0cmluZ3wqfHN0cmluZ31cbiAqL1xuZnVuY3Rpb24gcmVkaXJlY3RVcmxCeVJlcXVlc3QgKHJlc3BvbnNlLCBkZWZhdWx0VXJsID0gJycpXG57XG4gIGlmICghJ2RhdGEnIGluIHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRVcmxcbiAgfVxuXG4gIGNvbnN0IHJlZGlyZWN0VXJsID0gKCdyZWRpcmVjdFVybCcgaW4gcmVzcG9uc2UuZGF0YSkgPyByZXNwb25zZS5kYXRhLnJlZGlyZWN0VXJsIDogZGVmYXVsdFVybFxuXG4gIHJldHVybiByZWRpcmVjdFVybFxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/Request.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Class Request\n *\n * @type {Request}\n */\nvar Request =\n/*#__PURE__*/\nfunction () {\n  // TODO Make the fields private if possible.\n  function Request(ajaxUrl, action) {\n    _classCallCheck(this, Request);\n\n    this.ajaxUrl = ajaxUrl;\n    this.action = action;\n  }\n\n  _createClass(Request, [{\n    key: \"submit\",\n    value: function submit(formData) {\n      var _this = this;\n\n      // TODO Extract specific data such as: action, nonce, task, context and\n      //      put the rest within a specific object.\n      //      Make a separation for data controls and real request data.\n      if (_.isEmpty(formData)) {\n        return Promise.reject('No formData to send to the server.');\n      }\n\n      formData += \"&action=\".concat(this.action);\n      return new Promise(function (resolve, reject) {\n        jQuery.ajax({\n          traditional: true,\n          url: _this.ajaxUrl,\n          method: 'POST',\n          data: formData,\n          error: reject,\n          success: resolve\n        });\n      });\n    }\n  }]);\n\n  return Request;\n}();\n/**\n * Request Factory\n *\n * @param ajaxUrl\n * @param action\n * @returns {Request}\n */\n\n\nfunction RequestFactory(ajaxUrl, action) {\n  if (!ajaxUrl || !action) {\n    throw new Error('Invalid parameters when construct Request instance');\n  }\n\n  var object = new Request(ajaxUrl, action);\n  Object.freeze(object);\n  return object;\n}\n// CONCATENATED MODULE: ./resources/js/expressCheckout/context.js\n/**\n * Retrieve Context by Element\n *\n * @param element\n * @returns {string}\n */\nfunction contextByElement(element) {\n  return 'context' in element.dataset ? element.dataset.context : '';\n}\n// CONCATENATED MODULE: ./resources/js/expressCheckout/form.js\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\nvar CART_BUTTON_SELECTOR = 'woo-paypalplus-checkout-nonce';\n/**\n * Create a FormData object by the closest form of the given element\n *\n * @param element\n * @returns {String}\n */\n\nfunction form_formDataByElement(element) {\n  var form = element.closest('form');\n\n  if (!form) {\n    throw new Error('Unable to retrieve form. Form element does not exists or is not a parent of the given element.');\n  }\n\n  var formData = jQuery(form).serialize();\n  var context = contextByElement(element);\n  formData += \"&context=\".concat(context);\n  return formData;\n}\n/**\n * Create a FormData for the Cart\n * WooCommerce mini cart doesn't have any form associated with it\n *\n * @param element\n * @returns {String}\n */\n\nfunction formDataForCart(element) {\n  try {\n    var _retrieveNonceForCart = retrieveNonceForCart(element),\n        _retrieveNonceForCart2 = _slicedToArray(_retrieveNonceForCart, 2),\n        nonceName = _retrieveNonceForCart2[0],\n        nonceValue = _retrieveNonceForCart2[1];\n\n    var context = contextByElement(element);\n    return \"context=\".concat(context, \"&\").concat(nonceName, \"=\").concat(nonceValue);\n  } catch (err) {\n    return '';\n  }\n}\n\nfunction retrieveNonceForCart(element) {\n  var nonceElement = element.parentNode.querySelector(\".\".concat(CART_BUTTON_SELECTOR));\n\n  if (!nonceElement) {\n    throw new Error('Cannot build the form data, missing security nonce.');\n  }\n\n  var nonceName = 'noncename' in nonceElement.dataset ? nonceElement.dataset.noncename : '';\n  var nonceValue = 'noncevalue' in nonceElement.dataset ? nonceElement.dataset.noncevalue : '';\n\n  if (!nonceName || !nonceValue) {\n    throw new Error('Cannot build the form data, missing security nonce.');\n  }\n\n  return [nonceName, nonceValue];\n}\n// EXTERNAL MODULE: ./resources/js/utils.js\nvar utils = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/smartPaymentButton.js\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction smartPaymentButton_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction smartPaymentButton_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction smartPaymentButton_createClass(Constructor, protoProps, staticProps) { if (protoProps) smartPaymentButton_defineProperties(Constructor.prototype, protoProps); if (staticProps) smartPaymentButton_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar SINGLE_PRODUCT_BUTTON = 'paypalplus_ecs_single_product_button';\nvar CART_BUTTON = 'paypalplus_ecs_cart_button';\nvar TASK_CREATE_ORDER = 'createOrder';\nvar TASK_STORE_PAYMENT_DATA = 'storePaymentData';\n/**\n * Class Smart Payment Button Renderer\n *\n * @type {SmartPaymentButtonRenderer}\n */\n\nvar smartPaymentButton_SmartPaymentButtonRenderer =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Constructor\n   *\n   * @param buttonConfiguration\n   * @param validContexts\n   * @param request\n   */\n  function SmartPaymentButtonRenderer(buttonConfiguration, validContexts, request) {\n    smartPaymentButton_classCallCheck(this, SmartPaymentButtonRenderer);\n\n    this.buttonConfiguration = buttonConfiguration;\n    this.cancelUrl = this.buttonConfiguration.redirect_urls.cancel_url;\n    this.validContexts = Array.from(validContexts);\n    this.request = request;\n  }\n  /**\n   * Render button for single product\n   */\n\n\n  smartPaymentButton_createClass(SmartPaymentButtonRenderer, [{\n    key: \"singleProductButtonRender\",\n    value: function singleProductButtonRender() {\n      var element = document.querySelector(\"#\".concat(SINGLE_PRODUCT_BUTTON));\n      element && this.render(element);\n    }\n    /**\n     * Render Button for Cart\n     */\n\n  }, {\n    key: \"cartButtonRender\",\n    value: function cartButtonRender() {\n      var element = document.querySelector(\"#\".concat(CART_BUTTON));\n      element && this.render(element);\n    }\n    /**\n     * Render Button for the Given Element\n     *\n     * @param element\n     * @returns {*}\n     */\n    // TODO Make it private\n\n  }, {\n    key: \"render\",\n    value: function render(element) {\n      var _this = this;\n\n      if (_.isUndefined(paypal)) {\n        return;\n      }\n\n      var button = element.querySelector('.paypal-button');\n      button && button.remove();\n      paypal.Button.render(_objectSpread({}, this.buttonConfiguration, {\n        /**\n         * Do Payment\n         *\n         * @returns {*}\n         */\n        payment: function payment() {\n          var formData = _this.formDataByElement(element);\n\n          formData += \"&task=\".concat(TASK_CREATE_ORDER);\n          return _this.request.submit(formData).then(function (response) {\n            if (!'data' in response) {\n              console.warn('Unable to process the payment, server did not response with valid data');\n\n              try {\n                window.location = _this.cancelUrl;\n              } catch (e) {\n                return;\n              }\n            }\n\n            if (!response.success) {\n              try {\n                window.location = utils[\"redirectUrlByRequest\"](response, _this.cancelUrl);\n              } catch (e) {\n                return;\n              }\n            }\n\n            var orderId = 'orderId' in response.data ? response.data.orderId : '';\n\n            if (!orderId) {\n              try {\n                window.location = utils[\"redirectUrlByRequest\"](response, _this.cancelUrl);\n              } catch (e) {\n                return;\n              }\n            }\n\n            return orderId;\n          }).catch(function (error) {\n            var textStatus = 'textStatus' in error ? error.textStatus : 'Unknown Error during payment';\n            console.warn(textStatus);\n          });\n        },\n\n        /**\n         * Execute Authorization\n         *\n         * @param data\n         * @param actions\n         * @returns {*}\n         */\n        onAuthorize: function onAuthorize(data, actions) {\n          // TODO Ensure return_url exists.\n          var formData = _this.formDataByElement(element);\n\n          formData += \"&task=\".concat(TASK_STORE_PAYMENT_DATA);\n          formData += \"&orderId=\".concat(data.OrderID);\n          formData += \"&PayerID=\".concat(data.payerID);\n          formData += \"&paymentId=\".concat(data.paymentID);\n          formData += \"&token=\".concat(data.paymentToken);\n          return _this.request.submit(formData).then(function (response) {\n            if (!response.success) {\n              try {\n                window.location = utils[\"redirectUrlByRequest\"](response, _this.cancelUrl);\n              } catch (e) {\n                return;\n              }\n            }\n\n            var returnUrl = '';\n\n            if ('redirect_urls' in _this.buttonConfiguration && 'return_url' in _this.buttonConfiguration.redirect_urls) {\n              returnUrl = _this.buttonConfiguration.redirect_urls.return_url;\n            }\n\n            returnUrl && actions.redirect(null, returnUrl);\n          });\n        },\n\n        /**\n         * Perform Action when a Payment get Cancelled\n         *\n         * @param data\n         * @param actions\n         */\n        onCancel: function onCancel(data, actions) {\n          actions.close();\n          var cancelUrl = 'cancelUrl' in data ? data.cancelUrl : '';\n          cancelUrl && actions.redirect(null, cancelUrl);\n        },\n        onError: function onError(data, actions) {\n          console.log('ON ERROR', data, actions); // TODO Redirect to cart and show customizable notice with message.\n        }\n      }), element);\n    }\n    /**\n     * Retrieve context for FormData instance by the Given Element\n     *\n     * @param element\n     * @returns {String}\n     */\n    // TODO Make it private if not possible move it as closure within the render function.\n\n  }, {\n    key: \"formDataByElement\",\n    value: function formDataByElement(element) {\n      var formData = '';\n      var context = contextByElement(element);\n\n      if (!this.validContexts.includes(context)) {\n        throw new Error('Invalid context when try to retrieve the form data during express checkout request.');\n      }\n\n      try {\n        switch (context) {\n          case 'cart':\n            formData = formDataForCart(element);\n            break;\n\n          case 'product':\n            formData = form_formDataByElement(element);\n            break;\n        }\n      } catch (err) {}\n\n      return formData;\n    }\n  }]);\n\n  return SmartPaymentButtonRenderer;\n}();\n/**\n * Smart Payment Button Renderer Factory\n *\n * @param buttonConfiguration\n * @param validContexts\n * @param request\n * @returns {SmartPaymentButtonRenderer}\n * @constructor\n */\n\n\nfunction SmartPaymentButtonRendererFactory(buttonConfiguration, validContexts, request) {\n  var object = new smartPaymentButton_SmartPaymentButtonRenderer(buttonConfiguration, validContexts, request);\n  Object.freeze(object);\n  return object;\n}\n// CONCATENATED MODULE: ./resources/js/expressCheckout.js\n\n\n\n(function (jQuery, _, expressCheckoutData) {\n  /**\n   * Ensure the Global Express Checkout is a Valid Value\n   * @returns {boolean}\n   */\n  function isValidExpressCheckoutData() {\n    return !_.isUndefined(expressCheckoutData) && !_.isEmpty(expressCheckoutData);\n  }\n  /**\n   * Bootstrap Express checkout\n   * @returns void\n   */\n\n\n  function bootstrapExpressCheckout() {\n    if (!isValidExpressCheckoutData()) {\n      return;\n    }\n\n    var requestData = expressCheckoutData.request;\n\n    if (!_.isObject(requestData)) {\n      return;\n    }\n\n    var validContexts = expressCheckoutData.validContexts;\n\n    if (!_.isArray(validContexts)) {\n      return;\n    }\n\n    var request = RequestFactory(requestData.ajaxUrl, requestData.action);\n    var smartPaymentButton = SmartPaymentButtonRendererFactory(expressCheckoutData, validContexts, request);\n    smartPaymentButton.singleProductButtonRender();\n    smartPaymentButton.cartButtonRender();\n    jQuery(document.body).on('wc_fragments_refreshed wc_fragments_loaded removed_from_cart added_to_cart', function () {\n      smartPaymentButton.cartButtonRender();\n    });\n  }\n\n  window.addEventListener('load', function () {\n    bootstrapExpressCheckout();\n  });\n})(jQuery, window._, window.wooPayPalPlusExpressCheckout);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L1JlcXVlc3QuanM/OGQ1ZiIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L2NvbnRleHQuanM/NjhkMyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L2Zvcm0uanM/ZWE1ZCIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L3NtYXJ0UGF5bWVudEJ1dHRvbi5qcz9mM2IyIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9leHByZXNzQ2hlY2tvdXQuanM/ZGNjMyJdLCJuYW1lcyI6WyJSZXF1ZXN0IiwiYWpheFVybCIsImFjdGlvbiIsImZvcm1EYXRhIiwiXyIsImlzRW1wdHkiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzb2x2ZSIsImpRdWVyeSIsImFqYXgiLCJ0cmFkaXRpb25hbCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJlcnJvciIsInN1Y2Nlc3MiLCJSZXF1ZXN0RmFjdG9yeSIsIkVycm9yIiwib2JqZWN0IiwiT2JqZWN0IiwiZnJlZXplIiwiY29udGV4dEJ5RWxlbWVudCIsImVsZW1lbnQiLCJkYXRhc2V0IiwiY29udGV4dCIsIkNBUlRfQlVUVE9OX1NFTEVDVE9SIiwiZm9ybURhdGFCeUVsZW1lbnQiLCJmb3JtIiwiY2xvc2VzdCIsInNlcmlhbGl6ZSIsImZvcm1EYXRhRm9yQ2FydCIsInJldHJpZXZlTm9uY2VGb3JDYXJ0Iiwibm9uY2VOYW1lIiwibm9uY2VWYWx1ZSIsImVyciIsIm5vbmNlRWxlbWVudCIsInBhcmVudE5vZGUiLCJxdWVyeVNlbGVjdG9yIiwibm9uY2VuYW1lIiwibm9uY2V2YWx1ZSIsIlNJTkdMRV9QUk9EVUNUX0JVVFRPTiIsIkNBUlRfQlVUVE9OIiwiVEFTS19DUkVBVEVfT1JERVIiLCJUQVNLX1NUT1JFX1BBWU1FTlRfREFUQSIsIlNtYXJ0UGF5bWVudEJ1dHRvblJlbmRlcmVyIiwiYnV0dG9uQ29uZmlndXJhdGlvbiIsInZhbGlkQ29udGV4dHMiLCJyZXF1ZXN0IiwiY2FuY2VsVXJsIiwicmVkaXJlY3RfdXJscyIsImNhbmNlbF91cmwiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInJlbmRlciIsImlzVW5kZWZpbmVkIiwicGF5cGFsIiwiYnV0dG9uIiwicmVtb3ZlIiwiQnV0dG9uIiwicGF5bWVudCIsInN1Ym1pdCIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJ3YXJuIiwid2luZG93IiwibG9jYXRpb24iLCJlIiwidXRpbHMiLCJvcmRlcklkIiwiY2F0Y2giLCJ0ZXh0U3RhdHVzIiwib25BdXRob3JpemUiLCJhY3Rpb25zIiwiT3JkZXJJRCIsInBheWVySUQiLCJwYXltZW50SUQiLCJwYXltZW50VG9rZW4iLCJyZXR1cm5VcmwiLCJyZXR1cm5fdXJsIiwicmVkaXJlY3QiLCJvbkNhbmNlbCIsImNsb3NlIiwib25FcnJvciIsImxvZyIsImluY2x1ZGVzIiwiU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJGYWN0b3J5IiwiZXhwcmVzc0NoZWNrb3V0RGF0YSIsImlzVmFsaWRFeHByZXNzQ2hlY2tvdXREYXRhIiwiYm9vdHN0cmFwRXhwcmVzc0NoZWNrb3V0IiwicmVxdWVzdERhdGEiLCJpc09iamVjdCIsImlzQXJyYXkiLCJzbWFydFBheW1lbnRCdXR0b24iLCJzaW5nbGVQcm9kdWN0QnV0dG9uUmVuZGVyIiwiY2FydEJ1dHRvblJlbmRlciIsImJvZHkiLCJvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3b29QYXlQYWxQbHVzRXhwcmVzc0NoZWNrb3V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7QUFLQSxJQUFNQSxPQUFPO0FBQUE7QUFBQTtBQUVYO0FBQ0EsbUJBQWFDLE9BQWIsRUFBc0JDLE1BQXRCLEVBQ0E7QUFBQTs7QUFDRSxTQUFLRCxPQUFMLEdBQWVBLE9BQWY7QUFDQSxTQUFLQyxNQUFMLEdBQWNBLE1BQWQ7QUFDRDs7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LFdBQVcsR0FBR0gsbUJBQW1CLENBQUN6QyxPQUF4Qzs7QUFDQSxRQUFJLENBQUM1QyxDQUFDLENBQUN5RixRQUFGLENBQVdELFdBQVgsQ0FBTCxFQUE4QjtBQUM1QjtBQUNEOztBQUVELFFBQU03QyxhQUFhLEdBQUcwQyxtQkFBbUIsQ0FBQzFDLGFBQTFDOztBQUNBLFFBQUksQ0FBQzNDLENBQUMsQ0FBQzBGLE9BQUYsQ0FBVS9DLGFBQVYsQ0FBTCxFQUErQjtBQUM3QjtBQUNEOztBQUVELFFBQU1DLE9BQU8sR0FBRy9CLGNBQWMsQ0FBQzJFLFdBQVcsQ0FBQzNGLE9BQWIsRUFBc0IyRixXQUFXLENBQUMxRixNQUFsQyxDQUE5QjtBQUNBLFFBQU02RixrQkFBa0IsR0FBR1AsaUNBQWlDLENBQzFEQyxtQkFEMEQsRUFFMUQxQyxhQUYwRCxFQUcxREMsT0FIMEQsQ0FBNUQ7QUFNQStDLHNCQUFrQixDQUFDQyx5QkFBbkI7QUFDQUQsc0JBQWtCLENBQUNFLGdCQUFuQjtBQUNBeEYsVUFBTSxDQUFDNkMsUUFBUSxDQUFDNEMsSUFBVixDQUFOLENBQXNCQyxFQUF0QixDQUNFLDRFQURGLEVBQ2dGLFlBQU07QUFDbEZKLHdCQUFrQixDQUFDRSxnQkFBbkI7QUFDRCxLQUhIO0FBSUQ7O0FBRUQ5QixRQUFNLENBQUNpQyxnQkFBUCxDQUF3QixNQUF4QixFQUFnQyxZQUFNO0FBQ3BDVCw0QkFBd0I7QUFDekIsR0FGRDtBQUdELENBaERELEVBZ0RHbEYsTUFoREgsRUFnRFcwRCxNQUFNLENBQUMvRCxDQWhEbEIsRUFnRHFCK0QsTUFBTSxDQUFDa0MsNEJBaEQ1QiIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDbGFzcyBSZXF1ZXN0XG4gKlxuICogQHR5cGUge1JlcXVlc3R9XG4gKi9cbmNvbnN0IFJlcXVlc3QgPSBjbGFzcyBSZXF1ZXN0XG57XG4gIC8vIFRPRE8gTWFrZSB0aGUgZmllbGRzIHByaXZhdGUgaWYgcG9zc2libGUuXG4gIGNvbnN0cnVjdG9yIChhamF4VXJsLCBhY3Rpb24pXG4gIHtcbiAgICB0aGlzLmFqYXhVcmwgPSBhamF4VXJsXG4gICAgdGhpcy5hY3Rpb24gPSBhY3Rpb25cbiAgfVxuXG4gIHN1Ym1pdCAoZm9ybURhdGEpXG4gIHtcbiAgICAvLyBUT0RPIEV4dHJhY3Qgc3BlY2lmaWMgZGF0YSBzdWNoIGFzOiBhY3Rpb24sIG5vbmNlLCB0YXNrLCBjb250ZXh0IGFuZFxuICAgIC8vICAgICAgcHV0IHRoZSByZXN0IHdpdGhpbiBhIHNwZWNpZmljIG9iamVjdC5cbiAgICAvLyAgICAgIE1ha2UgYSBzZXBhcmF0aW9uIGZvciBkYXRhIGNvbnRyb2xzIGFuZCByZWFsIHJlcXVlc3QgZGF0YS5cblxuICAgIGlmIChfLmlzRW1wdHkoZm9ybURhdGEpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ05vIGZvcm1EYXRhIHRvIHNlbmQgdG8gdGhlIHNlcnZlci4nKVxuICAgIH1cblxuICAgIGZvcm1EYXRhICs9IGAmYWN0aW9uPSR7dGhpcy5hY3Rpb259YDtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgIHRyYWRpdGlvbmFsOiB0cnVlLFxuICAgICAgICB1cmw6IHRoaXMuYWpheFVybCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IGZvcm1EYXRhLFxuICAgICAgICBlcnJvcjogcmVqZWN0LFxuICAgICAgICBzdWNjZXNzOiByZXNvbHZlLFxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogUmVxdWVzdCBGYWN0b3J5XG4gKlxuICogQHBhcmFtIGFqYXhVcmxcbiAqIEBwYXJhbSBhY3Rpb25cbiAqIEByZXR1cm5zIHtSZXF1ZXN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gUmVxdWVzdEZhY3RvcnkgKGFqYXhVcmwsIGFjdGlvbilcbntcbiAgaWYgKCFhamF4VXJsIHx8ICFhY3Rpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFyYW1ldGVycyB3aGVuIGNvbnN0cnVjdCBSZXF1ZXN0IGluc3RhbmNlJylcbiAgfVxuXG4gIGxldCBvYmplY3QgPSBuZXcgUmVxdWVzdChhamF4VXJsLCBhY3Rpb24pXG4gIE9iamVjdC5mcmVlemUob2JqZWN0KVxuXG4gIHJldHVybiBvYmplY3Rcbn1cbiIsIi8qKlxuICogUmV0cmlldmUgQ29udGV4dCBieSBFbGVtZW50XG4gKlxuICogQHBhcmFtIGVsZW1lbnRcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250ZXh0QnlFbGVtZW50IChlbGVtZW50KVxue1xuICByZXR1cm4gKCdjb250ZXh0JyBpbiBlbGVtZW50LmRhdGFzZXQgPyBlbGVtZW50LmRhdGFzZXQuY29udGV4dCA6ICcnKVxufVxuIiwiaW1wb3J0IHsgY29udGV4dEJ5RWxlbWVudCB9IGZyb20gJy4vY29udGV4dCdcblxuY29uc3QgQ0FSVF9CVVRUT05fU0VMRUNUT1IgPSAnd29vLXBheXBhbHBsdXMtY2hlY2tvdXQtbm9uY2UnXG5cbi8qKlxuICogQ3JlYXRlIGEgRm9ybURhdGEgb2JqZWN0IGJ5IHRoZSBjbG9zZXN0IGZvcm0gb2YgdGhlIGdpdmVuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0gZWxlbWVudFxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1EYXRhQnlFbGVtZW50IChlbGVtZW50KVxue1xuICBjb25zdCBmb3JtID0gZWxlbWVudC5jbG9zZXN0KCdmb3JtJylcblxuICBpZiAoIWZvcm0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnVW5hYmxlIHRvIHJldHJpZXZlIGZvcm0uIEZvcm0gZWxlbWVudCBkb2VzIG5vdCBleGlzdHMgb3IgaXMgbm90IGEgcGFyZW50IG9mIHRoZSBnaXZlbiBlbGVtZW50LicsXG4gICAgKVxuICB9XG5cbiAgbGV0IGZvcm1EYXRhID0galF1ZXJ5KGZvcm0pLnNlcmlhbGl6ZSgpXG4gIGNvbnN0IGNvbnRleHQgPSBjb250ZXh0QnlFbGVtZW50KGVsZW1lbnQpXG5cbiAgZm9ybURhdGEgKz0gYCZjb250ZXh0PSR7Y29udGV4dH1gXG5cbiAgcmV0dXJuIGZvcm1EYXRhXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgRm9ybURhdGEgZm9yIHRoZSBDYXJ0XG4gKiBXb29Db21tZXJjZSBtaW5pIGNhcnQgZG9lc24ndCBoYXZlIGFueSBmb3JtIGFzc29jaWF0ZWQgd2l0aCBpdFxuICpcbiAqIEBwYXJhbSBlbGVtZW50XG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybURhdGFGb3JDYXJ0IChlbGVtZW50KVxue1xuICB0cnkge1xuICAgIGNvbnN0IFtub25jZU5hbWUsIG5vbmNlVmFsdWVdID0gcmV0cmlldmVOb25jZUZvckNhcnQoZWxlbWVudClcbiAgICBjb25zdCBjb250ZXh0ID0gY29udGV4dEJ5RWxlbWVudChlbGVtZW50KVxuICAgIHJldHVybiBgY29udGV4dD0ke2NvbnRleHR9JiR7bm9uY2VOYW1lfT0ke25vbmNlVmFsdWV9YFxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gJydcbiAgfVxufVxuXG5mdW5jdGlvbiByZXRyaWV2ZU5vbmNlRm9yQ2FydCAoZWxlbWVudClcbntcbiAgY29uc3Qgbm9uY2VFbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoYC4ke0NBUlRfQlVUVE9OX1NFTEVDVE9SfWApXG5cbiAgaWYgKCFub25jZUVsZW1lbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBidWlsZCB0aGUgZm9ybSBkYXRhLCBtaXNzaW5nIHNlY3VyaXR5IG5vbmNlLicpXG4gIH1cblxuICBjb25zdCBub25jZU5hbWUgPSAoJ25vbmNlbmFtZScgaW4gbm9uY2VFbGVtZW50LmRhdGFzZXQpID8gbm9uY2VFbGVtZW50LmRhdGFzZXQubm9uY2VuYW1lIDogJydcbiAgY29uc3Qgbm9uY2VWYWx1ZSA9ICgnbm9uY2V2YWx1ZScgaW4gbm9uY2VFbGVtZW50LmRhdGFzZXQpID8gbm9uY2VFbGVtZW50LmRhdGFzZXQubm9uY2V2YWx1ZSA6ICcnXG5cbiAgaWYgKCFub25jZU5hbWUgfHwgIW5vbmNlVmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBidWlsZCB0aGUgZm9ybSBkYXRhLCBtaXNzaW5nIHNlY3VyaXR5IG5vbmNlLicpXG4gIH1cblxuICByZXR1cm4gW1xuICAgIG5vbmNlTmFtZSxcbiAgICBub25jZVZhbHVlLFxuICBdXG59XG4iLCJpbXBvcnQgeyBmb3JtRGF0YUJ5RWxlbWVudCwgZm9ybURhdGFGb3JDYXJ0IH0gZnJvbSAnLi9mb3JtJ1xuaW1wb3J0IHsgY29udGV4dEJ5RWxlbWVudCB9IGZyb20gJy4vY29udGV4dCdcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJ1xuXG5jb25zdCBTSU5HTEVfUFJPRFVDVF9CVVRUT04gPSAncGF5cGFscGx1c19lY3Nfc2luZ2xlX3Byb2R1Y3RfYnV0dG9uJ1xuY29uc3QgQ0FSVF9CVVRUT04gPSAncGF5cGFscGx1c19lY3NfY2FydF9idXR0b24nXG5cbmNvbnN0IFRBU0tfQ1JFQVRFX09SREVSID0gJ2NyZWF0ZU9yZGVyJ1xuY29uc3QgVEFTS19TVE9SRV9QQVlNRU5UX0RBVEEgPSAnc3RvcmVQYXltZW50RGF0YSdcblxuLyoqXG4gKiBDbGFzcyBTbWFydCBQYXltZW50IEJ1dHRvbiBSZW5kZXJlclxuICpcbiAqIEB0eXBlIHtTbWFydFBheW1lbnRCdXR0b25SZW5kZXJlcn1cbiAqL1xuY29uc3QgU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXIgPSBjbGFzcyBTbWFydFBheW1lbnRCdXR0b25SZW5kZXJlclxue1xuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIGJ1dHRvbkNvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIHZhbGlkQ29udGV4dHNcbiAgICogQHBhcmFtIHJlcXVlc3RcbiAgICovXG4gIGNvbnN0cnVjdG9yIChidXR0b25Db25maWd1cmF0aW9uLCB2YWxpZENvbnRleHRzLCByZXF1ZXN0KVxuICB7XG4gICAgdGhpcy5idXR0b25Db25maWd1cmF0aW9uID0gYnV0dG9uQ29uZmlndXJhdGlvblxuICAgIHRoaXMuY2FuY2VsVXJsID0gdGhpcy5idXR0b25Db25maWd1cmF0aW9uLnJlZGlyZWN0X3VybHMuY2FuY2VsX3VybFxuICAgIHRoaXMudmFsaWRDb250ZXh0cyA9IEFycmF5LmZyb20odmFsaWRDb250ZXh0cylcbiAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGJ1dHRvbiBmb3Igc2luZ2xlIHByb2R1Y3RcbiAgICovXG4gIHNpbmdsZVByb2R1Y3RCdXR0b25SZW5kZXIgKClcbiAge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtTSU5HTEVfUFJPRFVDVF9CVVRUT059YClcbiAgICBlbGVtZW50ICYmIHRoaXMucmVuZGVyKGVsZW1lbnQpXG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIEJ1dHRvbiBmb3IgQ2FydFxuICAgKi9cbiAgY2FydEJ1dHRvblJlbmRlciAoKVxuICB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke0NBUlRfQlVUVE9OfWApXG4gICAgZWxlbWVudCAmJiB0aGlzLnJlbmRlcihlbGVtZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBCdXR0b24gZm9yIHRoZSBHaXZlbiBFbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50XG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgLy8gVE9ETyBNYWtlIGl0IHByaXZhdGVcbiAgcmVuZGVyIChlbGVtZW50KVxuICB7XG4gICAgaWYgKF8uaXNVbmRlZmluZWQocGF5cGFsKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYnV0dG9uID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGF5cGFsLWJ1dHRvbicpXG4gICAgYnV0dG9uICYmIGJ1dHRvbi5yZW1vdmUoKVxuXG4gICAgcGF5cGFsLkJ1dHRvbi5yZW5kZXIoe1xuICAgICAgLi4udGhpcy5idXR0b25Db25maWd1cmF0aW9uLFxuXG4gICAgICAvKipcbiAgICAgICAqIERvIFBheW1lbnRcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAqL1xuICAgICAgcGF5bWVudDogKCkgPT4ge1xuICAgICAgICBsZXQgZm9ybURhdGEgPSB0aGlzLmZvcm1EYXRhQnlFbGVtZW50KGVsZW1lbnQpXG4gICAgICAgIGZvcm1EYXRhICs9IGAmdGFzaz0ke1RBU0tfQ1JFQVRFX09SREVSfWBcblxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0LnN1Ym1pdChmb3JtRGF0YSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgaWYgKCEnZGF0YScgaW4gcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIHByb2Nlc3MgdGhlIHBheW1lbnQsIHNlcnZlciBkaWQgbm90IHJlc3BvbnNlIHdpdGggdmFsaWQgZGF0YScpXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB0aGlzLmNhbmNlbFVybFxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHV0aWxzLnJlZGlyZWN0VXJsQnlSZXF1ZXN0KHJlc3BvbnNlLCB0aGlzLmNhbmNlbFVybClcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgb3JkZXJJZCA9ICdvcmRlcklkJyBpbiByZXNwb25zZS5kYXRhID8gcmVzcG9uc2UuZGF0YS5vcmRlcklkIDogJydcblxuICAgICAgICAgIGlmICghb3JkZXJJZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gdXRpbHMucmVkaXJlY3RVcmxCeVJlcXVlc3QocmVzcG9uc2UsIHRoaXMuY2FuY2VsVXJsKVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gb3JkZXJJZFxuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgY29uc3QgdGV4dFN0YXR1cyA9ICd0ZXh0U3RhdHVzJyBpbiBlcnJvciA/IGVycm9yLnRleHRTdGF0dXMgOiAnVW5rbm93biBFcnJvciBkdXJpbmcgcGF5bWVudCdcbiAgICAgICAgICBjb25zb2xlLndhcm4odGV4dFN0YXR1cylcbiAgICAgICAgfSlcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogRXhlY3V0ZSBBdXRob3JpemF0aW9uXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGRhdGFcbiAgICAgICAqIEBwYXJhbSBhY3Rpb25zXG4gICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAqL1xuICAgICAgb25BdXRob3JpemU6IChkYXRhLCBhY3Rpb25zKSA9PiB7XG4gICAgICAgIC8vIFRPRE8gRW5zdXJlIHJldHVybl91cmwgZXhpc3RzLlxuICAgICAgICBsZXQgZm9ybURhdGEgPSB0aGlzLmZvcm1EYXRhQnlFbGVtZW50KGVsZW1lbnQpXG5cbiAgICAgICAgZm9ybURhdGEgKz0gYCZ0YXNrPSR7VEFTS19TVE9SRV9QQVlNRU5UX0RBVEF9YDtcbiAgICAgICAgZm9ybURhdGEgKz0gYCZvcmRlcklkPSR7ZGF0YS5PcmRlcklEfWA7XG4gICAgICAgIGZvcm1EYXRhICs9IGAmUGF5ZXJJRD0ke2RhdGEucGF5ZXJJRH1gO1xuICAgICAgICBmb3JtRGF0YSArPSBgJnBheW1lbnRJZD0ke2RhdGEucGF5bWVudElEfWA7XG4gICAgICAgIGZvcm1EYXRhICs9IGAmdG9rZW49JHtkYXRhLnBheW1lbnRUb2tlbn1gO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Quc3VibWl0KGZvcm1EYXRhKS50aGVuKChyZXNwb25zZSkgPT4ge1xuXG4gICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB1dGlscy5yZWRpcmVjdFVybEJ5UmVxdWVzdChyZXNwb25zZSwgdGhpcy5jYW5jZWxVcmwpXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCByZXR1cm5VcmwgPSAnJ1xuXG4gICAgICAgICAgaWYgKCdyZWRpcmVjdF91cmxzJyBpbiB0aGlzLmJ1dHRvbkNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICYmICdyZXR1cm5fdXJsJyBpbiB0aGlzLmJ1dHRvbkNvbmZpZ3VyYXRpb24ucmVkaXJlY3RfdXJsc1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuVXJsID0gdGhpcy5idXR0b25Db25maWd1cmF0aW9uLnJlZGlyZWN0X3VybHMucmV0dXJuX3VybFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVyblVybCAmJiBhY3Rpb25zLnJlZGlyZWN0KG51bGwsIHJldHVyblVybClcbiAgICAgICAgfSlcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogUGVyZm9ybSBBY3Rpb24gd2hlbiBhIFBheW1lbnQgZ2V0IENhbmNlbGxlZFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICAgKiBAcGFyYW0gYWN0aW9uc1xuICAgICAgICovXG4gICAgICBvbkNhbmNlbDogKGRhdGEsIGFjdGlvbnMpID0+IHtcbiAgICAgICAgYWN0aW9ucy5jbG9zZSgpXG4gICAgICAgIGNvbnN0IGNhbmNlbFVybCA9ICdjYW5jZWxVcmwnIGluIGRhdGEgPyBkYXRhLmNhbmNlbFVybCA6ICcnXG4gICAgICAgIGNhbmNlbFVybCAmJiBhY3Rpb25zLnJlZGlyZWN0KG51bGwsIGNhbmNlbFVybClcbiAgICAgIH0sXG5cbiAgICAgIG9uRXJyb3I6IChkYXRhLCBhY3Rpb25zKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPTiBFUlJPUicsIGRhdGEsIGFjdGlvbnMpXG4gICAgICAgIC8vIFRPRE8gUmVkaXJlY3QgdG8gY2FydCBhbmQgc2hvdyBjdXN0b21pemFibGUgbm90aWNlIHdpdGggbWVzc2FnZS5cbiAgICAgIH0sXG5cbiAgICB9LCBlbGVtZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGNvbnRleHQgZm9yIEZvcm1EYXRhIGluc3RhbmNlIGJ5IHRoZSBHaXZlbiBFbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAqL1xuICAvLyBUT0RPIE1ha2UgaXQgcHJpdmF0ZSBpZiBub3QgcG9zc2libGUgbW92ZSBpdCBhcyBjbG9zdXJlIHdpdGhpbiB0aGUgcmVuZGVyIGZ1bmN0aW9uLlxuICBmb3JtRGF0YUJ5RWxlbWVudCAoZWxlbWVudClcbiAge1xuICAgIGxldCBmb3JtRGF0YSA9ICcnXG4gICAgY29uc3QgY29udGV4dCA9IGNvbnRleHRCeUVsZW1lbnQoZWxlbWVudClcblxuICAgIGlmICghdGhpcy52YWxpZENvbnRleHRzLmluY2x1ZGVzKGNvbnRleHQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJbnZhbGlkIGNvbnRleHQgd2hlbiB0cnkgdG8gcmV0cmlldmUgdGhlIGZvcm0gZGF0YSBkdXJpbmcgZXhwcmVzcyBjaGVja291dCByZXF1ZXN0LicsXG4gICAgICApXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHN3aXRjaCAoY29udGV4dCkge1xuICAgICAgICBjYXNlICdjYXJ0JzpcbiAgICAgICAgICBmb3JtRGF0YSA9IGZvcm1EYXRhRm9yQ2FydChlbGVtZW50KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3Byb2R1Y3QnOlxuICAgICAgICAgIGZvcm1EYXRhID0gZm9ybURhdGFCeUVsZW1lbnQoZWxlbWVudClcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgIH1cblxuICAgIHJldHVybiBmb3JtRGF0YVxuICB9XG59XG5cbi8qKlxuICogU21hcnQgUGF5bWVudCBCdXR0b24gUmVuZGVyZXIgRmFjdG9yeVxuICpcbiAqIEBwYXJhbSBidXR0b25Db25maWd1cmF0aW9uXG4gKiBAcGFyYW0gdmFsaWRDb250ZXh0c1xuICogQHBhcmFtIHJlcXVlc3RcbiAqIEByZXR1cm5zIHtTbWFydFBheW1lbnRCdXR0b25SZW5kZXJlcn1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJGYWN0b3J5IChidXR0b25Db25maWd1cmF0aW9uLCB2YWxpZENvbnRleHRzLCByZXF1ZXN0KVxue1xuICBjb25zdCBvYmplY3QgPSBuZXcgU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXIoYnV0dG9uQ29uZmlndXJhdGlvbiwgdmFsaWRDb250ZXh0cywgcmVxdWVzdClcblxuICBPYmplY3QuZnJlZXplKG9iamVjdClcblxuICByZXR1cm4gb2JqZWN0XG59XG4iLCJpbXBvcnQgeyBSZXF1ZXN0RmFjdG9yeSB9IGZyb20gJy4vZXhwcmVzc0NoZWNrb3V0L1JlcXVlc3QnXG5pbXBvcnQgeyBTbWFydFBheW1lbnRCdXR0b25SZW5kZXJlckZhY3RvcnkgfSBmcm9tICcuL2V4cHJlc3NDaGVja291dC9zbWFydFBheW1lbnRCdXR0b24nXG5cbihmdW5jdGlvbiAoalF1ZXJ5LCBfLCBleHByZXNzQ2hlY2tvdXREYXRhKSB7XG4gIC8qKlxuICAgKiBFbnN1cmUgdGhlIEdsb2JhbCBFeHByZXNzIENoZWNrb3V0IGlzIGEgVmFsaWQgVmFsdWVcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBmdW5jdGlvbiBpc1ZhbGlkRXhwcmVzc0NoZWNrb3V0RGF0YSAoKVxuICB7XG4gICAgcmV0dXJuICFfLmlzVW5kZWZpbmVkKGV4cHJlc3NDaGVja291dERhdGEpICYmICFfLmlzRW1wdHkoZXhwcmVzc0NoZWNrb3V0RGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiBCb290c3RyYXAgRXhwcmVzcyBjaGVja291dFxuICAgKiBAcmV0dXJucyB2b2lkXG4gICAqL1xuICBmdW5jdGlvbiBib290c3RyYXBFeHByZXNzQ2hlY2tvdXQgKClcbiAge1xuICAgIGlmICghaXNWYWxpZEV4cHJlc3NDaGVja291dERhdGEoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdERhdGEgPSBleHByZXNzQ2hlY2tvdXREYXRhLnJlcXVlc3RcbiAgICBpZiAoIV8uaXNPYmplY3QocmVxdWVzdERhdGEpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB2YWxpZENvbnRleHRzID0gZXhwcmVzc0NoZWNrb3V0RGF0YS52YWxpZENvbnRleHRzXG4gICAgaWYgKCFfLmlzQXJyYXkodmFsaWRDb250ZXh0cykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHJlcXVlc3QgPSBSZXF1ZXN0RmFjdG9yeShyZXF1ZXN0RGF0YS5hamF4VXJsLCByZXF1ZXN0RGF0YS5hY3Rpb24pXG4gICAgY29uc3Qgc21hcnRQYXltZW50QnV0dG9uID0gU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJGYWN0b3J5KFxuICAgICAgZXhwcmVzc0NoZWNrb3V0RGF0YSxcbiAgICAgIHZhbGlkQ29udGV4dHMsXG4gICAgICByZXF1ZXN0LFxuICAgIClcblxuICAgIHNtYXJ0UGF5bWVudEJ1dHRvbi5zaW5nbGVQcm9kdWN0QnV0dG9uUmVuZGVyKClcbiAgICBzbWFydFBheW1lbnRCdXR0b24uY2FydEJ1dHRvblJlbmRlcigpXG4gICAgalF1ZXJ5KGRvY3VtZW50LmJvZHkpLm9uKFxuICAgICAgJ3djX2ZyYWdtZW50c19yZWZyZXNoZWQgd2NfZnJhZ21lbnRzX2xvYWRlZCByZW1vdmVkX2Zyb21fY2FydCBhZGRlZF90b19jYXJ0JywgKCkgPT4ge1xuICAgICAgICBzbWFydFBheW1lbnRCdXR0b24uY2FydEJ1dHRvblJlbmRlcigpXG4gICAgICB9KVxuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgYm9vdHN0cmFwRXhwcmVzc0NoZWNrb3V0KClcbiAgfSlcbn0pKGpRdWVyeSwgd2luZG93Ll8sIHdpbmRvdy53b29QYXlQYWxQbHVzRXhwcmVzc0NoZWNrb3V0KVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n")}]);
//# sourceMappingURL=expressCheckout.min.js.map