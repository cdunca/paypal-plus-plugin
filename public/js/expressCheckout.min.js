!function(n){var t={};function e(c){if(t[c])return t[c].exports;var g=t[c]={i:c,l:!1,exports:{}};return n[c].call(g.exports,g,g.exports,e),g.l=!0,g.exports}e.m=n,e.c=t,e.d=function(n,t,c){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:c})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var c=Object.create(null);if(e.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var g in n)e.d(c,g,function(t){return n[t]}.bind(null,g));return c},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=1)}([,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/Request.js\n/**\n * Class Request\n *\n * @type {Request}\n */\nconst Request = class Request {\n  // TODO Make the fields private if possible.\n  constructor (ajaxUrl, action) {\n    this.ajaxUrl = ajaxUrl\n    this.action = action\n  }\n\n  formDataObject (formData) {\n    const formDataEntries = [...formData.entries(), ['action', this.action]]\n    const dataObject = formDataEntries.reduce((obj, [key, value]) => {\n      obj[key] = value\n      return obj\n    }, {})\n\n    return dataObject\n  }\n\n  submit (formData) {\n    // TODO Extract specific data such as: action, nonce, task, context and\n    //      put the rest within a specific object.\n    //      Make a separation for data controls and real request data.\n\n    const dataObject = this.formDataObject(formData)\n\n    if (_.isEmpty(dataObject)) {\n      return Promise.reject('No formData to send to the server.')\n    }\n\n    return new Promise((resolve, reject) => {\n      jQuery.ajax({\n        url: this.ajaxUrl,\n        method: 'POST',\n        data: dataObject,\n        error: reject,\n        success: resolve\n      })\n    })\n  }\n}\n\n/**\n * Request Factory\n *\n * @param ajaxUrl\n * @param action\n * @returns {Request}\n */\nfunction RequestFactory (ajaxUrl, action) {\n  if (!ajaxUrl || !action) {\n    throw new Error('Invalid parameters when construct Request instance')\n  }\n\n  let object = new Request(ajaxUrl, action)\n  Object.freeze(object)\n\n  return object\n}\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/context.js\n/**\n * Retrieve Context by Element\n *\n * @param element\n * @returns {string}\n */\nfunction contextByElement (element) {\n  return ('context' in element.dataset ? element.dataset.context : '')\n}\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/form.js\n\n\nconst CART_BUTTON_SELECTOR = 'woo-paypalplus-checkout-nonce'\n\n/**\n * Create a FormData object by the closest form of the given element\n *\n * @param element\n * @returns {FormData}\n */\nfunction formDataByElement (element) {\n  const form = element.closest('form')\n\n  if (!form) {\n    throw new Error(\n      'Unable to retrieve form. Form element does not exists or is not a parent of the given element.'\n    )\n  }\n\n  const formData = new FormData(form)\n  formData.append('context', contextByElement(element))\n\n  return formData\n}\n\n/**\n * Create a FormData for the Cart\n * WooCommerce mini cart doesn't have any form associated with it\n *\n * @param element\n * @returns {FormData}\n */\nfunction formDataForCart (element) {\n  try {\n    const [nonceName, nonceValue] = retrieveNonceForCart(element)\n    const formData = new FormData()\n\n    formData.append('context', contextByElement(element))\n    formData.append(nonceName, nonceValue)\n\n    return formData\n  } catch (err) {\n    return new FormData()\n  }\n}\n\nfunction retrieveNonceForCart (element) {\n  const nonceElement = element.parentNode.querySelector(`.${CART_BUTTON_SELECTOR}`)\n\n  if (!nonceElement) {\n    throw new Error('Cannot build the form data, missing security nonce.')\n  }\n\n  const nonceName = ('noncename' in nonceElement.dataset) ? nonceElement.dataset.noncename : ''\n  const nonceValue = ('noncevalue' in nonceElement.dataset) ? nonceElement.dataset.noncevalue : ''\n\n  if (!nonceName || !nonceValue) {\n    throw new Error('Cannot build the form data, missing security nonce.')\n  }\n\n  return [\n    nonceName,\n    nonceValue\n  ]\n}\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/smartPaymentButton.js\n\n\n\nconst SINGLE_PRODUCT_BUTTON = 'paypalplus_ecs_single_product_button'\nconst CART_BUTTON = 'paypalplus_ecs_cart_button'\n\nconst TASK_CREATE_ORDER = 'createOrder'\nconst TASK_STORE_PAYMENT_DATA = 'storePaymentData'\n\n/**\n * Class Smart Payment Button Renderer\n *\n * @type {SmartPaymentButtonRenderer}\n */\nconst smartPaymentButton_SmartPaymentButtonRenderer = class SmartPaymentButtonRenderer {\n  /**\n   * Constructor\n   *\n   * @param buttonConfiguration\n   * @param validContexts\n   * @param request\n   */\n  constructor (buttonConfiguration, validContexts, request) {\n    this.buttonConfiguration = buttonConfiguration\n    this.validContexts = Array.from(validContexts)\n    this.request = request\n  }\n\n  /**\n   * Render button for single product\n   */\n  singleProductButtonRender () {\n    const element = document.querySelector(`#${SINGLE_PRODUCT_BUTTON}`)\n    element && this.render(element)\n  }\n\n  /**\n   * Render Button for Cart\n   */\n  cartButtonRender () {\n    const element = document.querySelector(`#${CART_BUTTON}`)\n    element && this.render(element)\n  }\n\n  /**\n   * Render Button for the Given Element\n   *\n   * @param element\n   * @returns {*}\n   */\n  // TODO Make it private\n  render (element) {\n    if (_.isUndefined(paypal)) {\n      return\n    }\n\n    paypal.Button.render({\n      ...this.buttonConfiguration,\n\n      /**\n       * Do Payment\n       *\n       * @returns {*}\n       */\n      payment: () => {\n        const formData = this.formDataByElement(element)\n        formData.append('task', TASK_CREATE_ORDER)\n\n        return this.request\n          .submit(formData)\n          .then(response => {\n            if (!('data' in response)) {\n              // TODO Do something to inform user about the problem and close the flow.\n            }\n\n            const orderId = 'orderID' in response.data ? response.data.orderID : ''\n            if (!orderId) {\n              // TODO Do something to inform user about the problem and close the flow.\n            }\n\n            return orderId\n          })\n      },\n\n      /**\n       * Execute Authorization\n       *\n       * @param data\n       * @param actions\n       * @returns {*}\n       */\n      onAuthorize: (data, actions) => {\n        // TODO Ensure return_url exists.\n        const formData = this.formDataByElement(element)\n\n        formData.append('task', TASK_STORE_PAYMENT_DATA)\n        formData.append('orderID', data.orderID)\n        formData.append('payerID', data.payerID)\n        formData.append('paymentID', data.paymentID)\n        formData.append('paymentToken', data.paymentToken)\n\n        return this.request\n          .submit(formData)\n          .then((response) => {\n            if (response.success) {\n              const returnUrl = 'returnUrl' in data ? data.returnUrl : ''\n              returnUrl && actions.redirect(null, returnUrl)\n            }\n\n            // TODO Show alert to the user\n          })\n      },\n\n      /**\n       * Perform Action when a Payment get Cancelled\n       *\n       * @param data\n       * @param actions\n       */\n      onCancel: (data, actions) => {\n        actions.close()\n        const cancelUrl = 'cancelUrl' in data ? data.cancelUrl : ''\n        cancelUrl && actions.redirect(null, cancelUrl)\n      },\n\n      onError: (data, actions) => {\n        console.log('ON ERROR', data, actions)\n        // TODO Redirect to cart and show customizable notice with message.\n      }\n\n    }, element)\n  }\n\n  /**\n   * Retrieve context for FormData instance by the Given Element\n   *\n   * @param element\n   * @returns {FormData}\n   */\n  // TODO Make it private if not possible move it as closure within the render function.\n  formDataByElement (element) {\n    let formData = new FormData()\n    const context = contextByElement(element)\n\n    if (!this.validContexts.includes(context)) {\n      throw new Error(\n        'Invalid context when try to retrieve the form data during express checkout request.'\n      )\n    }\n\n    try {\n      switch (context) {\n        case 'cart':\n          formData = formDataForCart(element)\n          break\n        case 'product':\n          formData = formDataByElement(element)\n          break\n      }\n    } catch (err) {\n    }\n\n    return formData\n  }\n}\n\n/**\n * Smart Payment Button Renderer Factory\n *\n * @param buttonConfiguration\n * @param validContexts\n * @param request\n * @returns {SmartPaymentButtonRenderer}\n * @constructor\n */\nfunction SmartPaymentButtonRendererFactory (buttonConfiguration, validContexts, request) {\n  const object = new smartPaymentButton_SmartPaymentButtonRenderer(buttonConfiguration, validContexts, request)\n\n  Object.freeze(object)\n\n  return object\n}\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout.js\n\n\n\n\n\n(function (jQuery, _, expressCheckoutData) {\n  /**\n   * Ensure the Global Express Checkout is a Valid Value\n   * @returns {boolean}\n   */\n  function isValidExpressCheckoutData () {\n    return !_.isUndefined(expressCheckoutData) && !_.isEmpty(expressCheckoutData)\n  }\n\n  /**\n   * Bootstrap Express checkout\n   * @returns void\n   */\n  function bootstrapExpressCheckout () {\n    if (!isValidExpressCheckoutData()) {\n      return\n    }\n\n    const requestData = expressCheckoutData.request\n    if (!_.isObject(requestData)) {\n      return\n    }\n\n    const validContexts = expressCheckoutData.validContexts\n    if (!_.isArray(validContexts)) {\n      return\n    }\n\n    const request = RequestFactory(requestData.ajaxUrl, requestData.action)\n    const smartPaymentButton = SmartPaymentButtonRendererFactory(\n      expressCheckoutData,\n      validContexts,\n      request\n    )\n\n    smartPaymentButton.singleProductButtonRender()\n    smartPaymentButton.cartButtonRender()\n    jQuery(document.body).on('wc_fragments_refreshed removed_from_cart added_to_cart', () => {\n      smartPaymentButton.cartButtonRender()\n    })\n  }\n\n  window.addEventListener('load', () => {\n    bootstrapExpressCheckout()\n  })\n})(jQuery, window._, window.wooPayPalPlusExpressCheckout)\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L1JlcXVlc3QuanM/OGQ1ZiIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L2NvbnRleHQuanM/NjhkMyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L2Zvcm0uanM/ZWE1ZCIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L3NtYXJ0UGF5bWVudEJ1dHRvbi5qcz9mM2IyIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9leHByZXNzQ2hlY2tvdXQuanM/ZGNjMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7OztBQ1I0Qzs7QUFFNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkIsZ0JBQWdCOztBQUU3QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQTs7QUFFQSwrQkFBK0IsZ0JBQWdCO0FBQy9DOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDREQUE0RCxxQkFBcUI7O0FBRWpGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoRTJEO0FBQ2Y7O0FBRTVDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxNQUFNLDZDQUEwQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msc0JBQXNCO0FBQ3JFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsWUFBWTtBQUMzRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1gsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1gsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZUFBZTtBQUNwQztBQUNBO0FBQ0EscUJBQXFCLGlCQUFpQjtBQUN0QztBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNPO0FBQ1AscUJBQXFCLDZDQUEwQjs7QUFFL0M7O0FBRUE7QUFDQTs7O0FDckwwRDtBQUM4Qjs7OztBQUl4RjtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsY0FBYztBQUNsQywrQkFBK0IsaUNBQWlDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQyIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDbGFzcyBSZXF1ZXN0XG4gKlxuICogQHR5cGUge1JlcXVlc3R9XG4gKi9cbmNvbnN0IFJlcXVlc3QgPSBjbGFzcyBSZXF1ZXN0IHtcbiAgLy8gVE9ETyBNYWtlIHRoZSBmaWVsZHMgcHJpdmF0ZSBpZiBwb3NzaWJsZS5cbiAgY29uc3RydWN0b3IgKGFqYXhVcmwsIGFjdGlvbikge1xuICAgIHRoaXMuYWpheFVybCA9IGFqYXhVcmxcbiAgICB0aGlzLmFjdGlvbiA9IGFjdGlvblxuICB9XG5cbiAgZm9ybURhdGFPYmplY3QgKGZvcm1EYXRhKSB7XG4gICAgY29uc3QgZm9ybURhdGFFbnRyaWVzID0gWy4uLmZvcm1EYXRhLmVudHJpZXMoKSwgWydhY3Rpb24nLCB0aGlzLmFjdGlvbl1dXG4gICAgY29uc3QgZGF0YU9iamVjdCA9IGZvcm1EYXRhRW50cmllcy5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBvYmpba2V5XSA9IHZhbHVlXG4gICAgICByZXR1cm4gb2JqXG4gICAgfSwge30pXG5cbiAgICByZXR1cm4gZGF0YU9iamVjdFxuICB9XG5cbiAgc3VibWl0IChmb3JtRGF0YSkge1xuICAgIC8vIFRPRE8gRXh0cmFjdCBzcGVjaWZpYyBkYXRhIHN1Y2ggYXM6IGFjdGlvbiwgbm9uY2UsIHRhc2ssIGNvbnRleHQgYW5kXG4gICAgLy8gICAgICBwdXQgdGhlIHJlc3Qgd2l0aGluIGEgc3BlY2lmaWMgb2JqZWN0LlxuICAgIC8vICAgICAgTWFrZSBhIHNlcGFyYXRpb24gZm9yIGRhdGEgY29udHJvbHMgYW5kIHJlYWwgcmVxdWVzdCBkYXRhLlxuXG4gICAgY29uc3QgZGF0YU9iamVjdCA9IHRoaXMuZm9ybURhdGFPYmplY3QoZm9ybURhdGEpXG5cbiAgICBpZiAoXy5pc0VtcHR5KGRhdGFPYmplY3QpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ05vIGZvcm1EYXRhIHRvIHNlbmQgdG8gdGhlIHNlcnZlci4nKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgIHVybDogdGhpcy5hamF4VXJsLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YTogZGF0YU9iamVjdCxcbiAgICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgICAgc3VjY2VzczogcmVzb2x2ZVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogUmVxdWVzdCBGYWN0b3J5XG4gKlxuICogQHBhcmFtIGFqYXhVcmxcbiAqIEBwYXJhbSBhY3Rpb25cbiAqIEByZXR1cm5zIHtSZXF1ZXN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gUmVxdWVzdEZhY3RvcnkgKGFqYXhVcmwsIGFjdGlvbikge1xuICBpZiAoIWFqYXhVcmwgfHwgIWFjdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwYXJhbWV0ZXJzIHdoZW4gY29uc3RydWN0IFJlcXVlc3QgaW5zdGFuY2UnKVxuICB9XG5cbiAgbGV0IG9iamVjdCA9IG5ldyBSZXF1ZXN0KGFqYXhVcmwsIGFjdGlvbilcbiAgT2JqZWN0LmZyZWV6ZShvYmplY3QpXG5cbiAgcmV0dXJuIG9iamVjdFxufVxuIiwiLyoqXG4gKiBSZXRyaWV2ZSBDb250ZXh0IGJ5IEVsZW1lbnRcbiAqXG4gKiBAcGFyYW0gZWxlbWVudFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRleHRCeUVsZW1lbnQgKGVsZW1lbnQpIHtcbiAgcmV0dXJuICgnY29udGV4dCcgaW4gZWxlbWVudC5kYXRhc2V0ID8gZWxlbWVudC5kYXRhc2V0LmNvbnRleHQgOiAnJylcbn1cbiIsImltcG9ydCB7IGNvbnRleHRCeUVsZW1lbnQgfSBmcm9tICcuL2NvbnRleHQnXG5cbmNvbnN0IENBUlRfQlVUVE9OX1NFTEVDVE9SID0gJ3dvby1wYXlwYWxwbHVzLWNoZWNrb3V0LW5vbmNlJ1xuXG4vKipcbiAqIENyZWF0ZSBhIEZvcm1EYXRhIG9iamVjdCBieSB0aGUgY2xvc2VzdCBmb3JtIG9mIHRoZSBnaXZlbiBlbGVtZW50XG4gKlxuICogQHBhcmFtIGVsZW1lbnRcbiAqIEByZXR1cm5zIHtGb3JtRGF0YX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1EYXRhQnlFbGVtZW50IChlbGVtZW50KSB7XG4gIGNvbnN0IGZvcm0gPSBlbGVtZW50LmNsb3Nlc3QoJ2Zvcm0nKVxuXG4gIGlmICghZm9ybSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdVbmFibGUgdG8gcmV0cmlldmUgZm9ybS4gRm9ybSBlbGVtZW50IGRvZXMgbm90IGV4aXN0cyBvciBpcyBub3QgYSBwYXJlbnQgb2YgdGhlIGdpdmVuIGVsZW1lbnQuJ1xuICAgIClcbiAgfVxuXG4gIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pXG4gIGZvcm1EYXRhLmFwcGVuZCgnY29udGV4dCcsIGNvbnRleHRCeUVsZW1lbnQoZWxlbWVudCkpXG5cbiAgcmV0dXJuIGZvcm1EYXRhXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgRm9ybURhdGEgZm9yIHRoZSBDYXJ0XG4gKiBXb29Db21tZXJjZSBtaW5pIGNhcnQgZG9lc24ndCBoYXZlIGFueSBmb3JtIGFzc29jaWF0ZWQgd2l0aCBpdFxuICpcbiAqIEBwYXJhbSBlbGVtZW50XG4gKiBAcmV0dXJucyB7Rm9ybURhdGF9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtRGF0YUZvckNhcnQgKGVsZW1lbnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBbbm9uY2VOYW1lLCBub25jZVZhbHVlXSA9IHJldHJpZXZlTm9uY2VGb3JDYXJ0KGVsZW1lbnQpXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKVxuXG4gICAgZm9ybURhdGEuYXBwZW5kKCdjb250ZXh0JywgY29udGV4dEJ5RWxlbWVudChlbGVtZW50KSlcbiAgICBmb3JtRGF0YS5hcHBlbmQobm9uY2VOYW1lLCBub25jZVZhbHVlKVxuXG4gICAgcmV0dXJuIGZvcm1EYXRhXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBuZXcgRm9ybURhdGEoKVxuICB9XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlTm9uY2VGb3JDYXJ0IChlbGVtZW50KSB7XG4gIGNvbnN0IG5vbmNlRWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKGAuJHtDQVJUX0JVVFRPTl9TRUxFQ1RPUn1gKVxuXG4gIGlmICghbm9uY2VFbGVtZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgYnVpbGQgdGhlIGZvcm0gZGF0YSwgbWlzc2luZyBzZWN1cml0eSBub25jZS4nKVxuICB9XG5cbiAgY29uc3Qgbm9uY2VOYW1lID0gKCdub25jZW5hbWUnIGluIG5vbmNlRWxlbWVudC5kYXRhc2V0KSA/IG5vbmNlRWxlbWVudC5kYXRhc2V0Lm5vbmNlbmFtZSA6ICcnXG4gIGNvbnN0IG5vbmNlVmFsdWUgPSAoJ25vbmNldmFsdWUnIGluIG5vbmNlRWxlbWVudC5kYXRhc2V0KSA/IG5vbmNlRWxlbWVudC5kYXRhc2V0Lm5vbmNldmFsdWUgOiAnJ1xuXG4gIGlmICghbm9uY2VOYW1lIHx8ICFub25jZVZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgYnVpbGQgdGhlIGZvcm0gZGF0YSwgbWlzc2luZyBzZWN1cml0eSBub25jZS4nKVxuICB9XG5cbiAgcmV0dXJuIFtcbiAgICBub25jZU5hbWUsXG4gICAgbm9uY2VWYWx1ZVxuICBdXG59XG4iLCJpbXBvcnQgeyBmb3JtRGF0YUJ5RWxlbWVudCwgZm9ybURhdGFGb3JDYXJ0IH0gZnJvbSAnLi9mb3JtJ1xuaW1wb3J0IHsgY29udGV4dEJ5RWxlbWVudCB9IGZyb20gJy4vY29udGV4dCdcblxuY29uc3QgU0lOR0xFX1BST0RVQ1RfQlVUVE9OID0gJ3BheXBhbHBsdXNfZWNzX3NpbmdsZV9wcm9kdWN0X2J1dHRvbidcbmNvbnN0IENBUlRfQlVUVE9OID0gJ3BheXBhbHBsdXNfZWNzX2NhcnRfYnV0dG9uJ1xuXG5jb25zdCBUQVNLX0NSRUFURV9PUkRFUiA9ICdjcmVhdGVPcmRlcidcbmNvbnN0IFRBU0tfU1RPUkVfUEFZTUVOVF9EQVRBID0gJ3N0b3JlUGF5bWVudERhdGEnXG5cbi8qKlxuICogQ2xhc3MgU21hcnQgUGF5bWVudCBCdXR0b24gUmVuZGVyZXJcbiAqXG4gKiBAdHlwZSB7U21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJ9XG4gKi9cbmNvbnN0IFNtYXJ0UGF5bWVudEJ1dHRvblJlbmRlcmVyID0gY2xhc3MgU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXIge1xuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIGJ1dHRvbkNvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIHZhbGlkQ29udGV4dHNcbiAgICogQHBhcmFtIHJlcXVlc3RcbiAgICovXG4gIGNvbnN0cnVjdG9yIChidXR0b25Db25maWd1cmF0aW9uLCB2YWxpZENvbnRleHRzLCByZXF1ZXN0KSB7XG4gICAgdGhpcy5idXR0b25Db25maWd1cmF0aW9uID0gYnV0dG9uQ29uZmlndXJhdGlvblxuICAgIHRoaXMudmFsaWRDb250ZXh0cyA9IEFycmF5LmZyb20odmFsaWRDb250ZXh0cylcbiAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGJ1dHRvbiBmb3Igc2luZ2xlIHByb2R1Y3RcbiAgICovXG4gIHNpbmdsZVByb2R1Y3RCdXR0b25SZW5kZXIgKCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtTSU5HTEVfUFJPRFVDVF9CVVRUT059YClcbiAgICBlbGVtZW50ICYmIHRoaXMucmVuZGVyKGVsZW1lbnQpXG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIEJ1dHRvbiBmb3IgQ2FydFxuICAgKi9cbiAgY2FydEJ1dHRvblJlbmRlciAoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke0NBUlRfQlVUVE9OfWApXG4gICAgZWxlbWVudCAmJiB0aGlzLnJlbmRlcihlbGVtZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBCdXR0b24gZm9yIHRoZSBHaXZlbiBFbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50XG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgLy8gVE9ETyBNYWtlIGl0IHByaXZhdGVcbiAgcmVuZGVyIChlbGVtZW50KSB7XG4gICAgaWYgKF8uaXNVbmRlZmluZWQocGF5cGFsKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgcGF5cGFsLkJ1dHRvbi5yZW5kZXIoe1xuICAgICAgLi4udGhpcy5idXR0b25Db25maWd1cmF0aW9uLFxuXG4gICAgICAvKipcbiAgICAgICAqIERvIFBheW1lbnRcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAqL1xuICAgICAgcGF5bWVudDogKCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuZm9ybURhdGFCeUVsZW1lbnQoZWxlbWVudClcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd0YXNrJywgVEFTS19DUkVBVEVfT1JERVIpXG5cbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFxuICAgICAgICAgIC5zdWJtaXQoZm9ybURhdGEpXG4gICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKCEoJ2RhdGEnIGluIHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAvLyBUT0RPIERvIHNvbWV0aGluZyB0byBpbmZvcm0gdXNlciBhYm91dCB0aGUgcHJvYmxlbSBhbmQgY2xvc2UgdGhlIGZsb3cuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG9yZGVySWQgPSAnb3JkZXJJRCcgaW4gcmVzcG9uc2UuZGF0YSA/IHJlc3BvbnNlLmRhdGEub3JkZXJJRCA6ICcnXG4gICAgICAgICAgICBpZiAoIW9yZGVySWQpIHtcbiAgICAgICAgICAgICAgLy8gVE9ETyBEbyBzb21ldGhpbmcgdG8gaW5mb3JtIHVzZXIgYWJvdXQgdGhlIHByb2JsZW0gYW5kIGNsb3NlIHRoZSBmbG93LlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3JkZXJJZFxuICAgICAgICAgIH0pXG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEV4ZWN1dGUgQXV0aG9yaXphdGlvblxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICAgKiBAcGFyYW0gYWN0aW9uc1xuICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgKi9cbiAgICAgIG9uQXV0aG9yaXplOiAoZGF0YSwgYWN0aW9ucykgPT4ge1xuICAgICAgICAvLyBUT0RPIEVuc3VyZSByZXR1cm5fdXJsIGV4aXN0cy5cbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLmZvcm1EYXRhQnlFbGVtZW50KGVsZW1lbnQpXG5cbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd0YXNrJywgVEFTS19TVE9SRV9QQVlNRU5UX0RBVEEpXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnb3JkZXJJRCcsIGRhdGEub3JkZXJJRClcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdwYXllcklEJywgZGF0YS5wYXllcklEKVxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3BheW1lbnRJRCcsIGRhdGEucGF5bWVudElEKVxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3BheW1lbnRUb2tlbicsIGRhdGEucGF5bWVudFRva2VuKVxuXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RcbiAgICAgICAgICAuc3VibWl0KGZvcm1EYXRhKVxuICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmV0dXJuVXJsID0gJ3JldHVyblVybCcgaW4gZGF0YSA/IGRhdGEucmV0dXJuVXJsIDogJydcbiAgICAgICAgICAgICAgcmV0dXJuVXJsICYmIGFjdGlvbnMucmVkaXJlY3QobnVsbCwgcmV0dXJuVXJsKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUT0RPIFNob3cgYWxlcnQgdG8gdGhlIHVzZXJcbiAgICAgICAgICB9KVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBQZXJmb3JtIEFjdGlvbiB3aGVuIGEgUGF5bWVudCBnZXQgQ2FuY2VsbGVkXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGRhdGFcbiAgICAgICAqIEBwYXJhbSBhY3Rpb25zXG4gICAgICAgKi9cbiAgICAgIG9uQ2FuY2VsOiAoZGF0YSwgYWN0aW9ucykgPT4ge1xuICAgICAgICBhY3Rpb25zLmNsb3NlKClcbiAgICAgICAgY29uc3QgY2FuY2VsVXJsID0gJ2NhbmNlbFVybCcgaW4gZGF0YSA/IGRhdGEuY2FuY2VsVXJsIDogJydcbiAgICAgICAgY2FuY2VsVXJsICYmIGFjdGlvbnMucmVkaXJlY3QobnVsbCwgY2FuY2VsVXJsKVxuICAgICAgfSxcblxuICAgICAgb25FcnJvcjogKGRhdGEsIGFjdGlvbnMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ09OIEVSUk9SJywgZGF0YSwgYWN0aW9ucylcbiAgICAgICAgLy8gVE9ETyBSZWRpcmVjdCB0byBjYXJ0IGFuZCBzaG93IGN1c3RvbWl6YWJsZSBub3RpY2Ugd2l0aCBtZXNzYWdlLlxuICAgICAgfVxuXG4gICAgfSwgZWxlbWVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBjb250ZXh0IGZvciBGb3JtRGF0YSBpbnN0YW5jZSBieSB0aGUgR2l2ZW4gRWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudFxuICAgKiBAcmV0dXJucyB7Rm9ybURhdGF9XG4gICAqL1xuICAvLyBUT0RPIE1ha2UgaXQgcHJpdmF0ZSBpZiBub3QgcG9zc2libGUgbW92ZSBpdCBhcyBjbG9zdXJlIHdpdGhpbiB0aGUgcmVuZGVyIGZ1bmN0aW9uLlxuICBmb3JtRGF0YUJ5RWxlbWVudCAoZWxlbWVudCkge1xuICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgY29uc3QgY29udGV4dCA9IGNvbnRleHRCeUVsZW1lbnQoZWxlbWVudClcblxuICAgIGlmICghdGhpcy52YWxpZENvbnRleHRzLmluY2x1ZGVzKGNvbnRleHQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJbnZhbGlkIGNvbnRleHQgd2hlbiB0cnkgdG8gcmV0cmlldmUgdGhlIGZvcm0gZGF0YSBkdXJpbmcgZXhwcmVzcyBjaGVja291dCByZXF1ZXN0LidcbiAgICAgIClcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgc3dpdGNoIChjb250ZXh0KSB7XG4gICAgICAgIGNhc2UgJ2NhcnQnOlxuICAgICAgICAgIGZvcm1EYXRhID0gZm9ybURhdGFGb3JDYXJ0KGVsZW1lbnQpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncHJvZHVjdCc6XG4gICAgICAgICAgZm9ybURhdGEgPSBmb3JtRGF0YUJ5RWxlbWVudChlbGVtZW50KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1EYXRhXG4gIH1cbn1cblxuLyoqXG4gKiBTbWFydCBQYXltZW50IEJ1dHRvbiBSZW5kZXJlciBGYWN0b3J5XG4gKlxuICogQHBhcmFtIGJ1dHRvbkNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSB2YWxpZENvbnRleHRzXG4gKiBAcGFyYW0gcmVxdWVzdFxuICogQHJldHVybnMge1NtYXJ0UGF5bWVudEJ1dHRvblJlbmRlcmVyfVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBTbWFydFBheW1lbnRCdXR0b25SZW5kZXJlckZhY3RvcnkgKGJ1dHRvbkNvbmZpZ3VyYXRpb24sIHZhbGlkQ29udGV4dHMsIHJlcXVlc3QpIHtcbiAgY29uc3Qgb2JqZWN0ID0gbmV3IFNtYXJ0UGF5bWVudEJ1dHRvblJlbmRlcmVyKGJ1dHRvbkNvbmZpZ3VyYXRpb24sIHZhbGlkQ29udGV4dHMsIHJlcXVlc3QpXG5cbiAgT2JqZWN0LmZyZWV6ZShvYmplY3QpXG5cbiAgcmV0dXJuIG9iamVjdFxufVxuIiwiaW1wb3J0IHsgUmVxdWVzdEZhY3RvcnkgfSBmcm9tICcuL2V4cHJlc3NDaGVja291dC9SZXF1ZXN0J1xuaW1wb3J0IHsgU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJGYWN0b3J5IH0gZnJvbSAnLi9leHByZXNzQ2hlY2tvdXQvc21hcnRQYXltZW50QnV0dG9uJ1xuXG5cblxuKGZ1bmN0aW9uIChqUXVlcnksIF8sIGV4cHJlc3NDaGVja291dERhdGEpIHtcbiAgLyoqXG4gICAqIEVuc3VyZSB0aGUgR2xvYmFsIEV4cHJlc3MgQ2hlY2tvdXQgaXMgYSBWYWxpZCBWYWx1ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGZ1bmN0aW9uIGlzVmFsaWRFeHByZXNzQ2hlY2tvdXREYXRhICgpIHtcbiAgICByZXR1cm4gIV8uaXNVbmRlZmluZWQoZXhwcmVzc0NoZWNrb3V0RGF0YSkgJiYgIV8uaXNFbXB0eShleHByZXNzQ2hlY2tvdXREYXRhKVxuICB9XG5cbiAgLyoqXG4gICAqIEJvb3RzdHJhcCBFeHByZXNzIGNoZWNrb3V0XG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIGZ1bmN0aW9uIGJvb3RzdHJhcEV4cHJlc3NDaGVja291dCAoKSB7XG4gICAgaWYgKCFpc1ZhbGlkRXhwcmVzc0NoZWNrb3V0RGF0YSgpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCByZXF1ZXN0RGF0YSA9IGV4cHJlc3NDaGVja291dERhdGEucmVxdWVzdFxuICAgIGlmICghXy5pc09iamVjdChyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkQ29udGV4dHMgPSBleHByZXNzQ2hlY2tvdXREYXRhLnZhbGlkQ29udGV4dHNcbiAgICBpZiAoIV8uaXNBcnJheSh2YWxpZENvbnRleHRzKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdCA9IFJlcXVlc3RGYWN0b3J5KHJlcXVlc3REYXRhLmFqYXhVcmwsIHJlcXVlc3REYXRhLmFjdGlvbilcbiAgICBjb25zdCBzbWFydFBheW1lbnRCdXR0b24gPSBTbWFydFBheW1lbnRCdXR0b25SZW5kZXJlckZhY3RvcnkoXG4gICAgICBleHByZXNzQ2hlY2tvdXREYXRhLFxuICAgICAgdmFsaWRDb250ZXh0cyxcbiAgICAgIHJlcXVlc3RcbiAgICApXG5cbiAgICBzbWFydFBheW1lbnRCdXR0b24uc2luZ2xlUHJvZHVjdEJ1dHRvblJlbmRlcigpXG4gICAgc21hcnRQYXltZW50QnV0dG9uLmNhcnRCdXR0b25SZW5kZXIoKVxuICAgIGpRdWVyeShkb2N1bWVudC5ib2R5KS5vbignd2NfZnJhZ21lbnRzX3JlZnJlc2hlZCByZW1vdmVkX2Zyb21fY2FydCBhZGRlZF90b19jYXJ0JywgKCkgPT4ge1xuICAgICAgc21hcnRQYXltZW50QnV0dG9uLmNhcnRCdXR0b25SZW5kZXIoKVxuICAgIH0pXG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICBib290c3RyYXBFeHByZXNzQ2hlY2tvdXQoKVxuICB9KVxufSkoalF1ZXJ5LCB3aW5kb3cuXywgd2luZG93Lndvb1BheVBhbFBsdXNFeHByZXNzQ2hlY2tvdXQpXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")}]);
//# sourceMappingURL=expressCheckout.min.js.map