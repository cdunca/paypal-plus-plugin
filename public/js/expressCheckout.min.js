!function(I){var n={};function g(C){if(n[C])return n[C].exports;var t=n[C]={i:C,l:!1,exports:{}};return I[C].call(t.exports,t,t.exports,g),t.l=!0,t.exports}g.m=I,g.c=n,g.d=function(I,n,C){g.o(I,n)||Object.defineProperty(I,n,{enumerable:!0,get:C})},g.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},g.t=function(I,n){if(1&n&&(I=g(I)),8&n)return I;if(4&n&&"object"==typeof I&&I&&I.__esModule)return I;var C=Object.create(null);if(g.r(C),Object.defineProperty(C,"default",{enumerable:!0,value:I}),2&n&&"string"!=typeof I)for(var t in I)g.d(C,t,function(n){return I[n]}.bind(null,t));return C},g.n=function(I){var n=I&&I.__esModule?function(){return I.default}:function(){return I};return g.d(n,"a",n),n},g.o=function(I,n){return Object.prototype.hasOwnProperty.call(I,n)},g.p="",g(g.s=1)}([,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/Request.js\n/**\n * Class Request\n *\n * @type {Request}\n */\nconst Request = class Request\n{\n    // TODO Make the fields private if possible.\n    constructor(ajaxUrl, action)\n    {\n        this.ajaxUrl = ajaxUrl;\n        this.action = action;\n    }\n\n    formDataObject(formData)\n    {\n        const formDataEntries = [...formData.entries(), ['action', this.action]];\n        const dataObject = formDataEntries.reduce((obj, [key, value]) => {\n            obj[key] = value;\n            return obj;\n        }, {});\n\n        return dataObject;\n    }\n\n    submit(formData)\n    {\n        // TODO Extract specific data such as: action, nonce, task, context and\n        //      put the rest within a specific object.\n        //      Make a separation for data controls and real request data.\n\n        const dataObject = this.formDataObject(formData);\n\n        if (_.isEmpty(dataObject)) {\n            return Promise.reject('No formData to send to the server.');\n        }\n\n        return new Promise((resolve, reject) => {\n            jQuery.ajax({\n                url: this.ajaxUrl,\n                method: 'POST',\n                data: dataObject,\n                error: reject,\n                success: resolve\n            });\n        });\n    }\n};\n\n/**\n * Request Factory\n *\n * @param ajaxUrl\n * @param action\n * @returns {Request}\n */\nfunction RequestFactory(ajaxUrl, action)\n{\n    if (!ajaxUrl || !action) {\n        throw new Error('Invalid parameters when construct Request instance');\n    }\n\n    let object = new Request(ajaxUrl, action);\n    Object.freeze(object);\n\n    return object;\n}\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/context.js\n/**\n * Retrieve Context by Element\n *\n * @param element\n * @returns {string}\n */\nfunction contextByElement(element)\n{\n    return ('context' in element.dataset ? element.dataset.context : '');\n}\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/form.js\n\n\nconst CART_BUTTON_SELECTOR = 'woo-paypalplus-checkout-nonce';\n\n/**\n * Create a FormData object by the closest form of the given element\n *\n * @param element\n * @returns {FormData}\n */\nfunction formDataByElement(element)\n{\n    const form = element.closest('form');\n\n    if (!form) {\n        throw new Error(\n            'Unable to retrieve form. Form element does not exists or is not a parent of the given element.'\n        );\n    }\n\n    const formData = new FormData(form);\n    formData.append('context', contextByElement(element));\n\n    return formData;\n}\n\n/**\n * Create a FormData for the Cart\n * WooCommerce mini cart doesn't have any form associated with it\n *\n * @param element\n * @returns {FormData}\n */\nfunction formDataForCart(element)\n{\n    try {\n        const [nonceName, nonceValue] = retrieveNonceForCart(element);\n        const formData = new FormData();\n\n        formData.append('context', contextByElement(element));\n        formData.append(nonceName, nonceValue);\n\n        return formData;\n    } catch (err) {\n        return new FormData();\n    }\n}\n\nfunction retrieveNonceForCart(element)\n{\n    const nonceElement = element.parentNode.querySelector(`.${CART_BUTTON_SELECTOR}`);\n\n    if (!nonceElement) {\n        throw new Error('Cannot build the form data, missing security nonce.');\n    }\n\n    const nonceName = ('noncename' in nonceElement.dataset) ? nonceElement.dataset.noncename : '';\n    const nonceValue = ('noncevalue' in nonceElement.dataset) ? nonceElement.dataset.noncevalue : '';\n\n    if (!nonceName || !nonceValue) {\n        throw new Error('Cannot build the form data, missing security nonce.');\n    }\n\n    return [\n        nonceName,\n        nonceValue\n    ];\n}\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout/smartPaymentButton.js\n\n\n\nconst SINGLE_PRODUCT_BUTTON = 'paypalplus_ecs_single_product_button';\nconst CART_BUTTON = 'paypalplus_ecs_cart_button';\n\nconst TASK_CREATE_ORDER = 'createOrder';\nconst TASK_STORE_PAYMENT_DATA = 'storePaymentData';\n\n/**\n * Class Smart Payment Button Renderer\n *\n * @type {SmartPaymentButtonRenderer}\n */\nconst smartPaymentButton_SmartPaymentButtonRenderer = class SmartPaymentButtonRenderer\n{\n    /**\n     * Constructor\n     *\n     * @param buttonConfiguration\n     * @param validContexts\n     * @param request\n     */\n    constructor(buttonConfiguration, validContexts, request)\n    {\n        this.buttonConfiguration = buttonConfiguration;\n        this.validContexts = Array.from(validContexts);\n        this.request = request;\n    }\n\n    /**\n     * Render button for single product\n     */\n    singleProductButtonRender()\n    {\n        const element = document.querySelector(`#${SINGLE_PRODUCT_BUTTON}`);\n        element && this.render(element);\n    }\n\n    /**\n     * Render Button for Cart\n     */\n    cartButtonRender()\n    {\n        const element = document.querySelector(`#${CART_BUTTON}`);\n        element && this.render(element);\n    }\n\n    /**\n     * Render Button for the Given Element\n     *\n     * @param element\n     * @returns {*}\n     */\n    // TODO Make it private\n    render(element)\n    {\n        if (_.isUndefined(paypal)) {\n            return;\n        }\n\n        paypal.Button.render({\n            ...this.buttonConfiguration,\n\n            /**\n             * Do Payment\n             *\n             * @returns {*}\n             */\n            payment: () => {\n                const formData = this.formDataByElement(element);\n                formData.append('task', TASK_CREATE_ORDER);\n\n                return this.request\n                    .submit(formData)\n                    .then(response => {\n                        if (!('data' in response)) {\n                            // TODO Do something to inform user about the problem and close the flow.\n                        }\n\n                        const orderId = 'orderID' in response.data ? response.data.orderID : '';\n                        if (!orderId) {\n                            // TODO Do something to inform user about the problem and close the flow.\n                        }\n\n                        return orderId;\n                    });\n            },\n\n            /**\n             * Execute Authorization\n             *\n             * @param data\n             * @param actions\n             * @returns {*}\n             */\n            onAuthorize: (data, actions) => {\n                // TODO Ensure return_url exists.\n                const formData = this.formDataByElement(element);\n\n                formData.append('task', TASK_STORE_PAYMENT_DATA);\n                formData.append('orderID', data.orderID);\n                formData.append('payerID', data.payerID);\n                formData.append('paymentID', data.paymentID);\n                formData.append('paymentToken', data.paymentToken);\n\n                return this.request\n                    .submit(formData)\n                    .then((response) => {\n                        if (response.success) {\n                            const returnUrl = 'returnUrl' in data ? data.returnUrl : '';\n                            returnUrl && actions.redirect(null, returnUrl);\n                        }\n\n                        // TODO Show alert to the user\n                    });\n            },\n\n            /**\n             * Perform Action when a Payment get Cancelled\n             *\n             * @param data\n             * @param actions\n             */\n            onCancel: (data, actions) => {\n                actions.close();\n                const cancelUrl = 'cancelUrl' in data ? data.cancelUrl : '';\n                cancelUrl && actions.redirect(null, cancelUrl);\n            },\n\n            onError: (data, actions) => {\n                console.log('ON ERROR', data, actions);\n                // TODO Redirect to cart and show customizable notice with message.\n            }\n\n        }, element);\n    }\n\n    /**\n     * Retrieve context for FormData instance by the Given Element\n     *\n     * @param element\n     * @returns {FormData}\n     */\n    // TODO Make it private if not possible move it as closure within the render function.\n    formDataByElement(element)\n    {\n        let formData = new FormData();\n        const context = contextByElement(element);\n\n        if (!this.validContexts.includes(context)) {\n            throw new Error(\n                'Invalid context when try to retrieve the form data during express checkout request.'\n            );\n        }\n\n        try {\n            switch (context) {\n                case 'cart':\n                    formData = formDataForCart(element);\n                    break;\n                case 'product':\n                    formData = formDataByElement(element);\n                    break;\n            }\n        } catch (err) {\n        }\n\n        return formData;\n    }\n};\n\n/**\n * Smart Payment Button Renderer Factory\n *\n * @param buttonConfiguration\n * @param validContexts\n * @param request\n * @returns {SmartPaymentButtonRenderer}\n * @constructor\n */\nfunction SmartPaymentButtonRendererFactory(buttonConfiguration, validContexts, request)\n{\n    const object = new smartPaymentButton_SmartPaymentButtonRenderer(buttonConfiguration, validContexts, request);\n\n    Object.freeze(object);\n\n    return object;\n}\n\n// CONCATENATED MODULE: ./resources/js/expressCheckout.js\n\n\n\n\n(function (jQuery, _, expressCheckoutData) {\n    /**\n     * Ensure the Global Express Checkout is a Valid Value\n     * @returns {boolean}\n     */\n    function isValidExpressCheckoutData()\n    {\n        return !_.isUndefined(expressCheckoutData) && !_.isEmpty(expressCheckoutData);\n    }\n\n    /**\n     * Bootstrap Express checkout\n     * @returns void\n     */\n    function bootstrapExpressCheckout()\n    {\n        if (!isValidExpressCheckoutData()) {\n            return;\n        }\n\n        const requestData = expressCheckoutData.request;\n        if (!_.isObject(requestData)) {\n            return;\n        }\n\n        const validContexts = expressCheckoutData.validContexts;\n        if (!_.isArray(validContexts)) {\n            return;\n        }\n\n        const request = RequestFactory(requestData.ajaxUrl, requestData.action);\n        const smartPaymentButton = SmartPaymentButtonRendererFactory(\n            expressCheckoutData,\n            validContexts,\n            request\n        );\n\n        smartPaymentButton.singleProductButtonRender();\n        smartPaymentButton.cartButtonRender();\n        jQuery(document.body).on('wc_fragments_refreshed removed_from_cart added_to_cart', () => {\n            smartPaymentButton.cartButtonRender();\n        });\n    }\n\n    window.addEventListener('load', () => {\n        bootstrapExpressCheckout();\n    });\n})(jQuery, window._, window.wooPayPalPlusExpressCheckout);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L1JlcXVlc3QuanM/OGQ1ZiIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L2NvbnRleHQuanM/NjhkMyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L2Zvcm0uanM/ZWE1ZCIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvZXhwcmVzc0NoZWNrb3V0L3NtYXJ0UGF5bWVudEJ1dHRvbi5qcz9mM2IyIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9leHByZXNzQ2hlY2tvdXQuanM/ZGNjMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsSUFBSTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7OztBQ1Q2Qzs7QUFFN0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCQUErQixnQkFBZ0I7O0FBRS9DO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUNBQW1DLGdCQUFnQjtBQUNuRDs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDhEQUE4RCxxQkFBcUI7O0FBRW5GO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuRTREO0FBQ2Y7O0FBRTdDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxNQUFNLDZDQUEwQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsc0JBQXNCO0FBQ3pFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxZQUFZO0FBQy9EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZUFBZTtBQUM5QztBQUNBO0FBQ0EsK0JBQStCLGlCQUFpQjtBQUNoRDtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNPO0FBQ1A7QUFDQSx1QkFBdUIsNkNBQTBCOztBQUVqRDs7QUFFQTtBQUNBOzs7QUM1TDJEO0FBQzhCOzs7QUFHekY7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixjQUFjO0FBQ3RDLG1DQUFtQyxpQ0FBaUM7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENsYXNzIFJlcXVlc3RcbiAqXG4gKiBAdHlwZSB7UmVxdWVzdH1cbiAqL1xuY29uc3QgUmVxdWVzdCA9IGNsYXNzIFJlcXVlc3RcbntcbiAgICAvLyBUT0RPIE1ha2UgdGhlIGZpZWxkcyBwcml2YXRlIGlmIHBvc3NpYmxlLlxuICAgIGNvbnN0cnVjdG9yKGFqYXhVcmwsIGFjdGlvbilcbiAgICB7XG4gICAgICAgIHRoaXMuYWpheFVybCA9IGFqYXhVcmw7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuICAgIH1cblxuICAgIGZvcm1EYXRhT2JqZWN0KGZvcm1EYXRhKVxuICAgIHtcbiAgICAgICAgY29uc3QgZm9ybURhdGFFbnRyaWVzID0gWy4uLmZvcm1EYXRhLmVudHJpZXMoKSwgWydhY3Rpb24nLCB0aGlzLmFjdGlvbl1dO1xuICAgICAgICBjb25zdCBkYXRhT2JqZWN0ID0gZm9ybURhdGFFbnRyaWVzLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgcmV0dXJuIGRhdGFPYmplY3Q7XG4gICAgfVxuXG4gICAgc3VibWl0KGZvcm1EYXRhKVxuICAgIHtcbiAgICAgICAgLy8gVE9ETyBFeHRyYWN0IHNwZWNpZmljIGRhdGEgc3VjaCBhczogYWN0aW9uLCBub25jZSwgdGFzaywgY29udGV4dCBhbmRcbiAgICAgICAgLy8gICAgICBwdXQgdGhlIHJlc3Qgd2l0aGluIGEgc3BlY2lmaWMgb2JqZWN0LlxuICAgICAgICAvLyAgICAgIE1ha2UgYSBzZXBhcmF0aW9uIGZvciBkYXRhIGNvbnRyb2xzIGFuZCByZWFsIHJlcXVlc3QgZGF0YS5cblxuICAgICAgICBjb25zdCBkYXRhT2JqZWN0ID0gdGhpcy5mb3JtRGF0YU9iamVjdChmb3JtRGF0YSk7XG5cbiAgICAgICAgaWYgKF8uaXNFbXB0eShkYXRhT2JqZWN0KSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdObyBmb3JtRGF0YSB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogdGhpcy5hamF4VXJsLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFPYmplY3QsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiByZXNvbHZlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBSZXF1ZXN0IEZhY3RvcnlcbiAqXG4gKiBAcGFyYW0gYWpheFVybFxuICogQHBhcmFtIGFjdGlvblxuICogQHJldHVybnMge1JlcXVlc3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBSZXF1ZXN0RmFjdG9yeShhamF4VXJsLCBhY3Rpb24pXG57XG4gICAgaWYgKCFhamF4VXJsIHx8ICFhY3Rpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBhcmFtZXRlcnMgd2hlbiBjb25zdHJ1Y3QgUmVxdWVzdCBpbnN0YW5jZScpO1xuICAgIH1cblxuICAgIGxldCBvYmplY3QgPSBuZXcgUmVxdWVzdChhamF4VXJsLCBhY3Rpb24pO1xuICAgIE9iamVjdC5mcmVlemUob2JqZWN0KTtcblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCIvKipcbiAqIFJldHJpZXZlIENvbnRleHQgYnkgRWxlbWVudFxuICpcbiAqIEBwYXJhbSBlbGVtZW50XG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGV4dEJ5RWxlbWVudChlbGVtZW50KVxue1xuICAgIHJldHVybiAoJ2NvbnRleHQnIGluIGVsZW1lbnQuZGF0YXNldCA/IGVsZW1lbnQuZGF0YXNldC5jb250ZXh0IDogJycpO1xufVxuIiwiaW1wb3J0IHsgY29udGV4dEJ5RWxlbWVudCB9IGZyb20gJy4vY29udGV4dCc7XG5cbmNvbnN0IENBUlRfQlVUVE9OX1NFTEVDVE9SID0gJ3dvby1wYXlwYWxwbHVzLWNoZWNrb3V0LW5vbmNlJztcblxuLyoqXG4gKiBDcmVhdGUgYSBGb3JtRGF0YSBvYmplY3QgYnkgdGhlIGNsb3Nlc3QgZm9ybSBvZiB0aGUgZ2l2ZW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSBlbGVtZW50XG4gKiBAcmV0dXJucyB7Rm9ybURhdGF9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtRGF0YUJ5RWxlbWVudChlbGVtZW50KVxue1xuICAgIGNvbnN0IGZvcm0gPSBlbGVtZW50LmNsb3Nlc3QoJ2Zvcm0nKTtcblxuICAgIGlmICghZm9ybSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnVW5hYmxlIHRvIHJldHJpZXZlIGZvcm0uIEZvcm0gZWxlbWVudCBkb2VzIG5vdCBleGlzdHMgb3IgaXMgbm90IGEgcGFyZW50IG9mIHRoZSBnaXZlbiBlbGVtZW50LidcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2NvbnRleHQnLCBjb250ZXh0QnlFbGVtZW50KGVsZW1lbnQpKTtcblxuICAgIHJldHVybiBmb3JtRGF0YTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBGb3JtRGF0YSBmb3IgdGhlIENhcnRcbiAqIFdvb0NvbW1lcmNlIG1pbmkgY2FydCBkb2Vzbid0IGhhdmUgYW55IGZvcm0gYXNzb2NpYXRlZCB3aXRoIGl0XG4gKlxuICogQHBhcmFtIGVsZW1lbnRcbiAqIEByZXR1cm5zIHtGb3JtRGF0YX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1EYXRhRm9yQ2FydChlbGVtZW50KVxue1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtub25jZU5hbWUsIG5vbmNlVmFsdWVdID0gcmV0cmlldmVOb25jZUZvckNhcnQoZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjb250ZXh0JywgY29udGV4dEJ5RWxlbWVudChlbGVtZW50KSk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChub25jZU5hbWUsIG5vbmNlVmFsdWUpO1xuXG4gICAgICAgIHJldHVybiBmb3JtRGF0YTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGb3JtRGF0YSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmV0cmlldmVOb25jZUZvckNhcnQoZWxlbWVudClcbntcbiAgICBjb25zdCBub25jZUVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcihgLiR7Q0FSVF9CVVRUT05fU0VMRUNUT1J9YCk7XG5cbiAgICBpZiAoIW5vbmNlRWxlbWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBidWlsZCB0aGUgZm9ybSBkYXRhLCBtaXNzaW5nIHNlY3VyaXR5IG5vbmNlLicpO1xuICAgIH1cblxuICAgIGNvbnN0IG5vbmNlTmFtZSA9ICgnbm9uY2VuYW1lJyBpbiBub25jZUVsZW1lbnQuZGF0YXNldCkgPyBub25jZUVsZW1lbnQuZGF0YXNldC5ub25jZW5hbWUgOiAnJztcbiAgICBjb25zdCBub25jZVZhbHVlID0gKCdub25jZXZhbHVlJyBpbiBub25jZUVsZW1lbnQuZGF0YXNldCkgPyBub25jZUVsZW1lbnQuZGF0YXNldC5ub25jZXZhbHVlIDogJyc7XG5cbiAgICBpZiAoIW5vbmNlTmFtZSB8fCAhbm9uY2VWYWx1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBidWlsZCB0aGUgZm9ybSBkYXRhLCBtaXNzaW5nIHNlY3VyaXR5IG5vbmNlLicpO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICAgIG5vbmNlTmFtZSxcbiAgICAgICAgbm9uY2VWYWx1ZVxuICAgIF07XG59XG4iLCJpbXBvcnQgeyBmb3JtRGF0YUJ5RWxlbWVudCwgZm9ybURhdGFGb3JDYXJ0IH0gZnJvbSAnLi9mb3JtJztcbmltcG9ydCB7IGNvbnRleHRCeUVsZW1lbnQgfSBmcm9tICcuL2NvbnRleHQnO1xuXG5jb25zdCBTSU5HTEVfUFJPRFVDVF9CVVRUT04gPSAncGF5cGFscGx1c19lY3Nfc2luZ2xlX3Byb2R1Y3RfYnV0dG9uJztcbmNvbnN0IENBUlRfQlVUVE9OID0gJ3BheXBhbHBsdXNfZWNzX2NhcnRfYnV0dG9uJztcblxuY29uc3QgVEFTS19DUkVBVEVfT1JERVIgPSAnY3JlYXRlT3JkZXInO1xuY29uc3QgVEFTS19TVE9SRV9QQVlNRU5UX0RBVEEgPSAnc3RvcmVQYXltZW50RGF0YSc7XG5cbi8qKlxuICogQ2xhc3MgU21hcnQgUGF5bWVudCBCdXR0b24gUmVuZGVyZXJcbiAqXG4gKiBAdHlwZSB7U21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJ9XG4gKi9cbmNvbnN0IFNtYXJ0UGF5bWVudEJ1dHRvblJlbmRlcmVyID0gY2xhc3MgU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJcbntcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIGJ1dHRvbkNvbmZpZ3VyYXRpb25cbiAgICAgKiBAcGFyYW0gdmFsaWRDb250ZXh0c1xuICAgICAqIEBwYXJhbSByZXF1ZXN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYnV0dG9uQ29uZmlndXJhdGlvbiwgdmFsaWRDb250ZXh0cywgcmVxdWVzdClcbiAgICB7XG4gICAgICAgIHRoaXMuYnV0dG9uQ29uZmlndXJhdGlvbiA9IGJ1dHRvbkNvbmZpZ3VyYXRpb247XG4gICAgICAgIHRoaXMudmFsaWRDb250ZXh0cyA9IEFycmF5LmZyb20odmFsaWRDb250ZXh0cyk7XG4gICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIGJ1dHRvbiBmb3Igc2luZ2xlIHByb2R1Y3RcbiAgICAgKi9cbiAgICBzaW5nbGVQcm9kdWN0QnV0dG9uUmVuZGVyKClcbiAgICB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtTSU5HTEVfUFJPRFVDVF9CVVRUT059YCk7XG4gICAgICAgIGVsZW1lbnQgJiYgdGhpcy5yZW5kZXIoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIEJ1dHRvbiBmb3IgQ2FydFxuICAgICAqL1xuICAgIGNhcnRCdXR0b25SZW5kZXIoKVxuICAgIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke0NBUlRfQlVUVE9OfWApO1xuICAgICAgICBlbGVtZW50ICYmIHRoaXMucmVuZGVyKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBCdXR0b24gZm9yIHRoZSBHaXZlbiBFbGVtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIC8vIFRPRE8gTWFrZSBpdCBwcml2YXRlXG4gICAgcmVuZGVyKGVsZW1lbnQpXG4gICAge1xuICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChwYXlwYWwpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwYXlwYWwuQnV0dG9uLnJlbmRlcih7XG4gICAgICAgICAgICAuLi50aGlzLmJ1dHRvbkNvbmZpZ3VyYXRpb24sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRG8gUGF5bWVudFxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwYXltZW50OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLmZvcm1EYXRhQnlFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndGFzaycsIFRBU0tfQ1JFQVRFX09SREVSKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgLnN1Ym1pdChmb3JtRGF0YSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoJ2RhdGEnIGluIHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gRG8gc29tZXRoaW5nIHRvIGluZm9ybSB1c2VyIGFib3V0IHRoZSBwcm9ibGVtIGFuZCBjbG9zZSB0aGUgZmxvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JkZXJJZCA9ICdvcmRlcklEJyBpbiByZXNwb25zZS5kYXRhID8gcmVzcG9uc2UuZGF0YS5vcmRlcklEIDogJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9yZGVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIERvIHNvbWV0aGluZyB0byBpbmZvcm0gdXNlciBhYm91dCB0aGUgcHJvYmxlbSBhbmQgY2xvc2UgdGhlIGZsb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRXhlY3V0ZSBBdXRob3JpemF0aW9uXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIGRhdGFcbiAgICAgICAgICAgICAqIEBwYXJhbSBhY3Rpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb25BdXRob3JpemU6IChkYXRhLCBhY3Rpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBFbnN1cmUgcmV0dXJuX3VybCBleGlzdHMuXG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLmZvcm1EYXRhQnlFbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd0YXNrJywgVEFTS19TVE9SRV9QQVlNRU5UX0RBVEEpO1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnb3JkZXJJRCcsIGRhdGEub3JkZXJJRCk7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdwYXllcklEJywgZGF0YS5wYXllcklEKTtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3BheW1lbnRJRCcsIGRhdGEucGF5bWVudElEKTtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3BheW1lbnRUb2tlbicsIGRhdGEucGF5bWVudFRva2VuKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgLnN1Ym1pdChmb3JtRGF0YSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblVybCA9ICdyZXR1cm5VcmwnIGluIGRhdGEgPyBkYXRhLnJldHVyblVybCA6ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblVybCAmJiBhY3Rpb25zLnJlZGlyZWN0KG51bGwsIHJldHVyblVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gU2hvdyBhbGVydCB0byB0aGUgdXNlclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUGVyZm9ybSBBY3Rpb24gd2hlbiBhIFBheW1lbnQgZ2V0IENhbmNlbGxlZFxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICAgICAgICAgKiBAcGFyYW0gYWN0aW9uc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvbkNhbmNlbDogKGRhdGEsIGFjdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsVXJsID0gJ2NhbmNlbFVybCcgaW4gZGF0YSA/IGRhdGEuY2FuY2VsVXJsIDogJyc7XG4gICAgICAgICAgICAgICAgY2FuY2VsVXJsICYmIGFjdGlvbnMucmVkaXJlY3QobnVsbCwgY2FuY2VsVXJsKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG9uRXJyb3I6IChkYXRhLCBhY3Rpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09OIEVSUk9SJywgZGF0YSwgYWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBSZWRpcmVjdCB0byBjYXJ0IGFuZCBzaG93IGN1c3RvbWl6YWJsZSBub3RpY2Ugd2l0aCBtZXNzYWdlLlxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sIGVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGNvbnRleHQgZm9yIEZvcm1EYXRhIGluc3RhbmNlIGJ5IHRoZSBHaXZlbiBFbGVtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxuICAgICAqIEByZXR1cm5zIHtGb3JtRGF0YX1cbiAgICAgKi9cbiAgICAvLyBUT0RPIE1ha2UgaXQgcHJpdmF0ZSBpZiBub3QgcG9zc2libGUgbW92ZSBpdCBhcyBjbG9zdXJlIHdpdGhpbiB0aGUgcmVuZGVyIGZ1bmN0aW9uLlxuICAgIGZvcm1EYXRhQnlFbGVtZW50KGVsZW1lbnQpXG4gICAge1xuICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNvbnRleHRCeUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkQ29udGV4dHMuaW5jbHVkZXMoY29udGV4dCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnSW52YWxpZCBjb250ZXh0IHdoZW4gdHJ5IHRvIHJldHJpZXZlIHRoZSBmb3JtIGRhdGEgZHVyaW5nIGV4cHJlc3MgY2hlY2tvdXQgcmVxdWVzdC4nXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN3aXRjaCAoY29udGV4dCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NhcnQnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YSA9IGZvcm1EYXRhRm9yQ2FydChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncHJvZHVjdCc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhID0gZm9ybURhdGFCeUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb3JtRGF0YTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFNtYXJ0IFBheW1lbnQgQnV0dG9uIFJlbmRlcmVyIEZhY3RvcnlcbiAqXG4gKiBAcGFyYW0gYnV0dG9uQ29uZmlndXJhdGlvblxuICogQHBhcmFtIHZhbGlkQ29udGV4dHNcbiAqIEBwYXJhbSByZXF1ZXN0XG4gKiBAcmV0dXJucyB7U21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJ9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFNtYXJ0UGF5bWVudEJ1dHRvblJlbmRlcmVyRmFjdG9yeShidXR0b25Db25maWd1cmF0aW9uLCB2YWxpZENvbnRleHRzLCByZXF1ZXN0KVxue1xuICAgIGNvbnN0IG9iamVjdCA9IG5ldyBTbWFydFBheW1lbnRCdXR0b25SZW5kZXJlcihidXR0b25Db25maWd1cmF0aW9uLCB2YWxpZENvbnRleHRzLCByZXF1ZXN0KTtcblxuICAgIE9iamVjdC5mcmVlemUob2JqZWN0KTtcblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgeyBSZXF1ZXN0RmFjdG9yeSB9IGZyb20gJy4vZXhwcmVzc0NoZWNrb3V0L1JlcXVlc3QnO1xuaW1wb3J0IHsgU21hcnRQYXltZW50QnV0dG9uUmVuZGVyZXJGYWN0b3J5IH0gZnJvbSAnLi9leHByZXNzQ2hlY2tvdXQvc21hcnRQYXltZW50QnV0dG9uJztcblxuXG4oZnVuY3Rpb24gKGpRdWVyeSwgXywgZXhwcmVzc0NoZWNrb3V0RGF0YSkge1xuICAgIC8qKlxuICAgICAqIEVuc3VyZSB0aGUgR2xvYmFsIEV4cHJlc3MgQ2hlY2tvdXQgaXMgYSBWYWxpZCBWYWx1ZVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzVmFsaWRFeHByZXNzQ2hlY2tvdXREYXRhKClcbiAgICB7XG4gICAgICAgIHJldHVybiAhXy5pc1VuZGVmaW5lZChleHByZXNzQ2hlY2tvdXREYXRhKSAmJiAhXy5pc0VtcHR5KGV4cHJlc3NDaGVja291dERhdGEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJvb3RzdHJhcCBFeHByZXNzIGNoZWNrb3V0XG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJvb3RzdHJhcEV4cHJlc3NDaGVja291dCgpXG4gICAge1xuICAgICAgICBpZiAoIWlzVmFsaWRFeHByZXNzQ2hlY2tvdXREYXRhKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcXVlc3REYXRhID0gZXhwcmVzc0NoZWNrb3V0RGF0YS5yZXF1ZXN0O1xuICAgICAgICBpZiAoIV8uaXNPYmplY3QocmVxdWVzdERhdGEpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZENvbnRleHRzID0gZXhwcmVzc0NoZWNrb3V0RGF0YS52YWxpZENvbnRleHRzO1xuICAgICAgICBpZiAoIV8uaXNBcnJheSh2YWxpZENvbnRleHRzKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IFJlcXVlc3RGYWN0b3J5KHJlcXVlc3REYXRhLmFqYXhVcmwsIHJlcXVlc3REYXRhLmFjdGlvbik7XG4gICAgICAgIGNvbnN0IHNtYXJ0UGF5bWVudEJ1dHRvbiA9IFNtYXJ0UGF5bWVudEJ1dHRvblJlbmRlcmVyRmFjdG9yeShcbiAgICAgICAgICAgIGV4cHJlc3NDaGVja291dERhdGEsXG4gICAgICAgICAgICB2YWxpZENvbnRleHRzLFxuICAgICAgICAgICAgcmVxdWVzdFxuICAgICAgICApO1xuXG4gICAgICAgIHNtYXJ0UGF5bWVudEJ1dHRvbi5zaW5nbGVQcm9kdWN0QnV0dG9uUmVuZGVyKCk7XG4gICAgICAgIHNtYXJ0UGF5bWVudEJ1dHRvbi5jYXJ0QnV0dG9uUmVuZGVyKCk7XG4gICAgICAgIGpRdWVyeShkb2N1bWVudC5ib2R5KS5vbignd2NfZnJhZ21lbnRzX3JlZnJlc2hlZCByZW1vdmVkX2Zyb21fY2FydCBhZGRlZF90b19jYXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgc21hcnRQYXltZW50QnV0dG9uLmNhcnRCdXR0b25SZW5kZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgIGJvb3RzdHJhcEV4cHJlc3NDaGVja291dCgpO1xuICAgIH0pO1xufSkoalF1ZXJ5LCB3aW5kb3cuXywgd2luZG93Lndvb1BheVBhbFBsdXNFeHByZXNzQ2hlY2tvdXQpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")}]);
//# sourceMappingURL=expressCheckout.min.js.map